(window.webpackJsonpLiveHelperChat=window.webpackJsonpLiveHelperChat||[]).push([[2],{34:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.msgSnippetWidget=void 0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=(i(3),i(4)),o=i(1);var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.attributes={},this.hidden=!1,this.widgetOpen=!1,this.invitationOpen=!1,this.nhOpen=!1,this.cont=new n.UIConstructorIframe((e||"lhc")+"_msgsnippet_widget_v2",o.helperFunctions.getAbstractStyle({zindex:"2147483639",width:"300px",height:"200px",position:"fixed",display:"none"}),null,"iframe"),this.loadStatus={main:!1,theme:!1,status:!1}}return s(t,[{key:"checkLoadStatus",value:function(){1==this.loadStatus.theme&&1==this.loadStatus.main&&1==this.loadStatus.status&&(this.cont.elmDomDoc.body.style.display="",this.fitContent())}},{key:"init",value:function(t,e){var i=this;if(this.attributes=t,this.attributes=t,this.cont.tmpl=e.msg.replace("{dev_type}",!0===this.attributes.isMobile?"lhc-mobile":"lhc-desktop").replace("{msg_body}",e.msg_body),this.cont.bodyId="msgsnippet",null===this.cont.constructUIIframe("",this.attributes.staticJS.dir))return null;this.cont.elmDomDoc.body.style.display="none",this.cont.elmDom.className+=!0===this.attributes.isMobile?" lhc-mobile":" lhc-desktop",this.cont.attachUserEventListener("click",(function(e){t.eventEmitter.emitEvent("msgSnippetClicked",[{event:e,sender:"closeButton"}]),t.eventEmitter.emitEvent("showWidget",[{event:e}])}),"start-chat-btn","msgsnippetstart");var s=this;this.cont.attachUserEventListener("click",(function(e){t.eventEmitter.emitEvent("msgsnippetClosed",[{sender:"closeButton"}]),e.stopPropagation(),s.hide(!0)}),"close-need-help-btn","msgsnippetclose"),this.cont.insertCssRemoteFile({onload:function(){i.loadStatus.main=!0,i.checkLoadStatus()},crossOrigin:"anonymous",href:this.attributes.staticJS.widget_css},!0),1==this.attributes.isMobile&&this.cont.insertCssRemoteFile({crossOrigin:"anonymous",href:this.attributes.staticJS.widget_mobile_css}),this.attributes.theme>0?this.cont.insertCssRemoteFile({onload:function(){i.loadStatus.theme=!0,i.checkLoadStatus()},id:"lhc-theme-msgsnippet",crossOrigin:"anonymous",href:this.attributes.LHC_API.args.lhc_base_url+"/widgetrestapi/theme/"+this.attributes.theme+"?v="+this.attributes.theme_v},!0):(this.loadStatus.theme=!0,this.checkLoadStatus()),t.sload.subscribe((function(t){t&&(i.loadStatus.status=!0,i.checkLoadStatus())})),t.eventEmitter.emitEvent("showMsgSnippet",[{sender:"closeButton"}]),t.eventEmitter.addListener("unread_message",(function(){0==i.hidden&&o.helperFunctions.makeRequest(i.attributes.LHC_API.args.lhc_base_url+i.attributes.lang+"widgetrestapi/getmessagesnippet",{params:i.attributes.userSession.getSessionAttributes()},(function(t){i.showSnippet(t,!1)}))})),t.eventEmitter.addListener("hide_msg_snippet",(function(){i.hide(!0)})),t.widgetStatus.subscribe((function(t){1==t?(i.widgetOpen=!0,i.hide(!0)):(i.widgetOpen=!1,i.show())})),t.eventEmitter.addListener("reloadWidget",(function(){i.cont.insertCssRemoteFile({onload:function(){i.loadStatus.theme=!0,i.checkLoadStatus()},id:"lhc-theme-msgsnippet",crossOrigin:"anonymous",href:i.attributes.LHC_API.args.lhc_base_url+"/widgetrestapi/theme/"+i.attributes.theme+"?v="+Date.now()},!0)}))}},{key:"hide",value:function(t){void 0!==t&&!0===t&&(this.hidden=!0),this.cont.hide(),1==this.nhOpen&&this.attributes.eventEmitter.emitEvent("msgSnippetHide",[]),this.attributes.msgsnippet_status.next(!1),this.nhOpen=!1}},{key:"showSnippet",value:function(t,e){1==e&&(this.hidden=!1,this.show()),this.cont.elmDomDoc.getElementById("messages-scroll").innerHTML=t.msg_body,this.fitContent()}},{key:"fitContent",value:function(){var t=this.cont.elmDomDoc.getElementById("messages-scroll").offsetHeight,e={bottom:70+this.attributes.widgetDimesions.value.wbottom-(91-t)+"px",right:65+this.attributes.widgetDimesions.value.wright+"px"};"bottom_left"==this.attributes.position_placement||"full_height_left"==this.attributes.position_placement?e={bottom:70+this.attributes.widgetDimesions.value.wbottom-(91-t)+"px",left:65+this.attributes.widgetDimesions.value.wright+"px"}:"middle_left"==this.attributes.position_placement?e={bottom:"calc(50% + 35px)",left:65+this.attributes.widgetDimesions.value.wright+"px"}:"middle_right"==this.attributes.position_placement&&(e={bottom:"calc(50% + 35px)",right:65+this.attributes.widgetDimesions.value.wright+"px"}),this.cont.massRestyle(e)}},{key:"show",value:function(){1!=this.hidden&&1!=this.widgetOpen&&1!=this.invitationOpen&&0!=this.attributes.onlineStatus.value&&(!1===this.attributes.hideOffline?(this.cont.show(),0==this.nhOpen&&(this.attributes.eventEmitter.emitEvent("msgSnippetShow",[]),this.attributes.msgsnippet_status.next(!0)),this.nhOpen=!0):(this.cont.hide(),1==this.nhOpen&&(this.attributes.eventEmitter.emitEvent("msgSnippetHide",[]),this.attributes.msgsnippet_status.next(!1)),this.nhOpen=!1))}}]),t}();e.msgSnippetWidget=a}}]);
//# sourceMappingURL=46641b4e87c94ca43d34.js.map