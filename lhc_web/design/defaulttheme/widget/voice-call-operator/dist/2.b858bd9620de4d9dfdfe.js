(window.webpackJsonpLHCVoiceCallAPP=window.webpackJsonpLHCVoiceCallAPP||[]).push([[2],{47:function(e,t,a){"use strict";a.r(t);var n=a(14),c=a.n(n),i=a(1),r=a.n(i),s=a(0),l=a.n(s),u=a(28),o=a.n(u),d=a(48);var f=function(e,t){var a=Object(s.useRef)();Object(s.useEffect)((function(){a.current=e}),[e]),Object(s.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])};function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e,t){switch(t.type){case"attr":return-1===(n=e.chats.findIndex((function(e){return e.id==t.id})))?e:(e.chats[n]=h({},e.chats[n],{},t.value),e=h({},e));case"attr_remove":return-1===(n=e.chats.findIndex((function(e){return e[t.attr]==t.id})))?e:(e.chats[n]=h({},e.chats[n],{},t.value),e=h({},e));case"update":return h({},e,{},t.value);case"add":return-1===(n=e.chats.findIndex((function(e){return e.id==t.value.id})))?e.chats.unshift(t.value):(e.chats[n].active=!0,e.chats[n].mn=0,e.chats[n].support_chat=!1),h({},e);case"remove":return-1===(n=e.chats.findIndex((function(e){return e.id==t.id})))?e:(e.chats.splice(n,1),h({},e));case"update_chat":return-1===(n=e.chats.findIndex((function(e){return e.id==t.id})))?e:(e.chats[n]=h({},e.chats[n],{},t.value),h({},e));case"msg_received":if(-1===(n=e.chats.findIndex((function(e){return e.id==t.id}))))return e;e.chats[n].msg=t.value.msg;var a=document.getElementById("chat-tab-link-"+t.id);return null!==a&&a.classList.contains("active")?e.chats[n].active=!0:e.chats[n].active=!1,e.chats[n].mn=0==e.chats[n].active?e.chats[n].mn?e.chats[n].mn+t.value.mn:t.value.mn:0,e.chats.splice(0,0,e.chats.splice(n,1)[0]),h({},e);case"refocus":var n;if(-1!==(n=e.chats.findIndex((function(e){return 1==e.active})))){if(t.id==e.chats[n].id)return e;e.chats[n].active=!1}return-1!==(n=e.chats.findIndex((function(e){return e.id==t.id})))&&(e.chats[n].active=!0,e.chats[n].mn=0,e.chats[n].support_chat=!1),h({},e);case"group_offline":return e.group_offline=t.value,h({},e);default:throw new Error("Unknown action!")}}t.default=function(e){var t=Object(s.useReducer)(v,{chats:[],call:{},inCall:!1}),a=c()(t,2),n=a[0],i=a[1],r=Object(s.useRef)(n);Object(s.useEffect)((function(){r.current=n}),[n]);Object(s.useEffect)((function(){return o.a.get(WWW_DIR_JAVASCRIPT+"voicevideo/join/"+e.initParams.id+"/"+e.initParams.hash).then((function(e){i({type:"update",value:{call:e.data}})})),function(){}}),[]);var u=Object(d.a)("voice_call"),m=(u.t,u.i18n,function(){o.a.get(WWW_DIR_JAVASCRIPT+"voicevideo/join/"+e.initParams.id+"/"+e.initParams.hash+"/(action)/cancel").then((function(e){i({type:"update",value:{call:e.data}})}))});f((function(){o.a.get(WWW_DIR_JAVASCRIPT+"voicevideo/join/"+e.initParams.id+"/"+e.initParams.hash).then((function(e){i({type:"update",value:{call:e.data}})}))}),1==n.call.vi_status?2e3:null);var h=function(){o.a.post(WWW_DIR_JAVASCRIPT+"voicevideo/join/"+e.initParams.id+"/"+e.initParams.hash+"/(action)/request",{type:document.getElementById("inlineFormCheck1").checked?"audiovideo":"audio"}).then((function(e){i({type:"update",value:{call:e.data}})}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"d-flex flex-row flex-grow-1 pt-2"},l.a.createElement("div",{className:"col bg-light mx-1 align-middle text-center d-flex"},l.a.createElement("div",{className:"align-self-center mx-auto "},"Op 1")),l.a.createElement("div",{className:"col bg-light mx-1 align-middle text-center d-flex"},l.a.createElement("div",{className:"align-self-center mx-auto"},"Op 2")),l.a.createElement("div",{className:"col bg-light mx-1 align-middle text-center d-flex"},l.a.createElement("div",{className:"align-self-center mx-auto"},"Op 2"))),l.a.createElement("div",{className:"row header-chat desktop-header"},l.a.createElement("div",{className:"p-2 text-center mx-auto"},1==n.call.vi_status&&l.a.createElement("button",{className:"btn btn-primary w-100",onClick:function(){return m()}},"Let visitor in"),2==n.call.vi_status&&l.a.createElement("button",{className:"btn btn-primary",onClick:function(){return m()}},"Visitor has joined a call"),1==n.call.op_status&&l.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return h()}},"Leave a call"),0==n.call.op_status&&l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return h()}},"Join with audio"),l.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return h()}},"Join with audio & video")))))}}}]);
//# sourceMappingURL=2.b858bd9620de4d9dfdfe.js.map