{"version":3,"file":"906.5201102036368098d3c9.js","mappings":"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","sources":["webpack://LHCReactAPP/./src/components/ProactiveInvitation.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { hideInvitation } from \"../actions/chatActions\"\nimport { helperFunctions } from \"../lib/helperFunctions\";\nimport ChatBotIntroMessage from './ChatBotIntroMessage';\n\n@connect((store) => {\n    return {\n        chatwidget: store.chatwidget\n    };\n})\n\nclass ProactiveInvitation extends Component {\n\n    state = {\n        shown: false\n    }\n\n    constructor(props) {\n        super(props);\n        this.hideInvitation = this.hideInvitation.bind(this);\n        this.fullInvitation = this.fullInvitation.bind(this);\n        this.setBotPayload = this.setBotPayload.bind(this);\n        this.expireTimeout = null;\n    }\n\n    componentDidMount() {\n        helperFunctions.sendMessageParent('showInvitation', [{name: this.props.chatwidget.getIn(['proactive','data','invitation_name'])}]);\n\n        if (this.props.chatwidget.getIn(['proactive','data','play_sound'])) {\n            helperFunctions.emitEvent('play_sound', [{'type' : 'new_invitation', 'sound_on' : (this.props.chatwidget.getIn(['proactive','data','play_sound']) === true), 'widget_open' : ((this.props.chatwidget.get('shown') && this.props.chatwidget.get('mode') == 'widget') || document.hasFocus())}]);\n        }\n\n        if (!(this.props.chatwidget.hasIn(['proactive','data','full_widget']) && !this.props.chatwidget.get('isMobile'))) {\n            if (document.getElementById('id-invitation-height')) {\n                setTimeout(()=> {\n                    if (document.getElementById('id-invitation-height')) {\n                        helperFunctions.sendMessageParent('widgetHeight', [{\n                            'force_width' : (this.props.chatwidget.hasIn(['proactive','data','message_width']) ? this.props.chatwidget.getIn(['proactive','data','message_width']) + 40 : 240),\n                            'force_height' : document.getElementById('id-invitation-height').offsetHeight + 20,\n                            'force_bottom' : (this.props.chatwidget.hasIn(['proactive','data','message_bottom']) ? this.props.chatwidget.getIn(['proactive','data','message_bottom']) : 75),\n                            'force_right' : (this.props.chatwidget.hasIn(['proactive','data','message_right']) ? this.props.chatwidget.getIn(['proactive','data','message_right']) : 75),\n                        }]);\n                        this.setState({shown : true});\n                    }\n                 }, 50);\n            }\n        }\n\n        if (this.props.chatwidget.hasIn(['proactive','data','inv_expires'])) {\n            this.expireTimeout = setTimeout(() => {\n                this.props.dispatch(hideInvitation(true));\n            },this.props.chatwidget.getIn(['proactive','data','inv_expires'])*1000);\n        }\n    }\n\n    componentWillUnmount() {\n        clearTimeout(this.expireTimeout);\n        helperFunctions.sendMessageParent('widgetHeight', [{'reset_height' : true}]);\n    }\n\n    hideInvitation(e) {\n        this.props.dispatch(hideInvitation());\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    fullInvitation() {\n        helperFunctions.sendMessageParentDirect('hideInvitation', [{'full' : true, name: this.props.chatwidget.getIn(['proactive','data','invitation_name'])}]);\n        this.props.dispatch({\n            'type' : 'FULL_INVITATION'\n        });\n    }\n\n    setBotPayload(params) {\n        // Set payload parameter\n        this.props.setBotPayload(params);\n\n        // Set auto start\n        // This way it's faster just user might see blank screen while submiting\n        // So just decided to show full invitation and submit in the background.\n        /*this.props.dispatch({\n            'type' : 'attr_set',\n            'attr' : ['chat_ui','auto_start'],\n            'data' : true,\n        });*/\n\n        // Show full invitation show auto submit will work\n        this.fullInvitation();\n    }\n\n    render() {\n\n        if (this.props.chatwidget.hasIn(['proactive','data','full_widget']) && !this.props.chatwidget.get('isMobile')) {\n            this.fullInvitation();\n        }\n\n        let className = \"\";\n        if (this.state.shown === false) {\n            className += \" invisible\";\n        } else {\n            className += \" fade-in\";\n        }\n\n        return (\n                <div id=\"id-invitation-height\" className={className} >\n\n                    {this.props.chatwidget.hasIn(['proactive','data','close_above_msg']) && <div className=\"text-right\"><button title=\"Close\" onClick={(e) => this.hideInvitation(e)} id=\"invitation-close-btn\" className=\"btn btn-sm rounded\"><i className=\"material-icons mr-0\">&#xf10a;</i></button></div>}\n\n                    <div className=\"p-2 pointer clearfix proactive-need-help\" id=\"proactive-wrapper\" style={{width:(this.props.chatwidget.hasIn(['proactive','data','message_width']) ? this.props.chatwidget.getIn(['proactive','data','message_width']) : 200)}} onClick={this.fullInvitation}>\n\n                        {!this.props.chatwidget.hasIn(['proactive','data','close_above_msg']) && <button title=\"Close\" onClick={(e) => this.hideInvitation(e)} id=\"invitation-close-btn\" className=\"float-right btn btn-sm rounded\"><i className=\"material-icons mr-0\">&#xf10a;</i></button>}\n\n                        {this.props.chatwidget.hasIn(['proactive','data','photo_left_column']) && this.props.chatwidget.getIn(['proactive','data','photo']) && <div className=\"d-flex\">\n\n                            <div className=\"proactive-image\">\n                                <img width=\"30\" alt={this.props.chatwidget.getIn(['proactive','data','name_support']) || this.props.chatwidget.getIn(['proactive','data','extra_profile'])} title={this.props.chatwidget.getIn(['proactive','data','name_support']) || this.props.chatwidget.getIn(['proactive','data','extra_profile'])} className=\"mr-2 rounded\" src={this.props.chatwidget.getIn(['proactive','data','photo'])} />\n                            </div>\n\n                            <div className=\"flex-grow-1\">\n                                {!this.props.chatwidget.hasIn(['proactive','data','hide_op_name']) && <div className=\"fs14\">\n                                    <b>{this.props.chatwidget.getIn(['proactive','data','name_support']) || this.props.chatwidget.getIn(['proactive','data','extra_profile'])}</b>\n                                </div>}\n                                <div id=\"inv-msg-wrapper\">\n                                    <p className=\"fs13 mb-0 inv-msg-cnt\" dangerouslySetInnerHTML={{__html:this.props.chatwidget.getIn(['proactive','data','message'])}}></p>\n                                    {this.props.chatwidget.hasIn(['proactive','data','bot_intro']) && <ChatBotIntroMessage setBotPayload={this.setBotPayload} content={this.props.chatwidget.getIn(['proactive','data','message_full'])} />}\n                                </div>\n                            </div>\n\n                        </div>}\n\n                        {(!this.props.chatwidget.hasIn(['proactive', 'data', 'photo_left_column']) || !this.props.chatwidget.getIn(['proactive', 'data', 'photo'])) &&\n                            <div>\n                                <div className=\"fs14\">\n                                    {this.props.chatwidget.getIn(['proactive', 'data', 'photo']) && <img width=\"30\" height=\"30\"\n                                                                                                     alt={this.props.chatwidget.getIn(['proactive', 'data', 'name_support']) || this.props.chatwidget.getIn(['proactive', 'data', 'extra_profile'])}\n                                                                                                     title={this.props.chatwidget.getIn(['proactive', 'data', 'name_support']) || this.props.chatwidget.getIn(['proactive', 'data', 'extra_profile'])}\n                                                                                                     className=\"mr-2 rounded\"\n                                                                                                     src={this.props.chatwidget.getIn(['proactive', 'data', 'photo'])}/>}\n\n                                    {!this.props.chatwidget.hasIn(['proactive','data','hide_op_name']) && <b>{this.props.chatwidget.getIn(['proactive', 'data', 'name_support']) || this.props.chatwidget.getIn(['proactive', 'data', 'extra_profile'])}</b>}\n                                </div>\n                                <div id=\"inv-msg-wrapper\">\n                                    <p className=\"fs13 mb-0 inv-msg-cnt\" dangerouslySetInnerHTML={{__html: this.props.chatwidget.getIn(['proactive', 'data', 'message'])}}></p>\n                                    {this.props.chatwidget.hasIn(['proactive','data','bot_intro']) && <ChatBotIntroMessage setBotPayload={this.setBotPayload} content={this.props.chatwidget.getIn(['proactive', 'data', 'message_full'])} />}\n                                </div>\n                            </div>\n                        }\n\n\n                    </div>\n                </div>\n        );\n    }\n}\n\nexport default ProactiveInvitation;\n"],"names":["ProactiveInvitation","connect","store","chatwidget","props","shown","hideInvitation","bind","fullInvitation","setBotPayload","expireTimeout","helperFunctions","name","this","getIn","get","document","hasFocus","hasIn","getElementById","setTimeout","offsetHeight","setState","dispatch","clearTimeout","e","preventDefault","stopPropagation","params","className","state","id","title","onClick","style","width","alt","src","dangerouslySetInnerHTML","__html","content","height","Component"],"sourceRoot":""}