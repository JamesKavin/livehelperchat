(self.webpackChunkLHCReactAPP=self.webpackChunkLHCReactAPP||[]).push([[702],{2858:t=>{t.exports=function(t){if(Array.isArray(t))return t}},3884:t=>{t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var a=[],i=!0,n=!1,s=void 0;try{for(var r,o=t[Symbol.iterator]();!(i=(r=o.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(t){n=!0,s=t}finally{try{i||null==o.return||o.return()}finally{if(n)throw s}}return a}}},521:t=>{t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},3038:(t,e,a)=>{var i=a(2858),n=a(3884),s=a(521);t.exports=function(t,e){return i(t)||n(t,e)||s()}},6313:(t,e,a)=>{"use strict";a.d(e,{Z:()=>g});var i=a(4575),n=a.n(i),s=a(3913),r=a.n(s),o=a(2205),l=a.n(o),c=a(8585),p=a.n(c),h=a(9754),d=a.n(h),u=a(7294);const g=function(t){l()(s,t);var e,a,i=(e=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=d()(e);if(a){var n=d()(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return p()(this,t)});function s(t){return n()(this,s),i.call(this,t)}return r()(s,[{key:"render",value:function(){return u.createElement(u.Fragment,null,u.createElement("div",{className:"fade modal-backdrop show"}),u.createElement("div",{role:"dialog",id:"dialog-content","aria-modal":"true",className:"fade modal show d-block p-2",tabIndex:"-1"},u.createElement("div",{className:"modal-content p-2"},u.createElement("p",null,this.props.text),u.createElement("div",{className:"modal-footer"},u.createElement("button",{className:"btn btn-secondary btn-sm",onClick:this.props.close,type:"button"},this.props.closeText)))))}}]),s}(u.PureComponent)},5918:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7154),_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4575),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3913),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1506),_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2205),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8585),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(9754),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(7294),html_react_parser__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(488),html_react_parser__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(html_react_parser__WEBPACK_IMPORTED_MODULE_8__),react_redux__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(6458);function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var a,i=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(t);if(e){var n=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6___default()(this).constructor;a=Reflect.construct(i,arguments,n)}else a=i.apply(this,arguments);return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5___default()(this,a)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var ChatBotIntroMessage=function(_PureComponent){_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default()(ChatBotIntroMessage,_PureComponent);var _super=_createSuper(ChatBotIntroMessage);function ChatBotIntroMessage(t){var e;return _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this,ChatBotIntroMessage),(e=_super.call(this,t)).abstractClick=e.abstractClick.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(e)),e.updateTriggerClicked=e.updateTriggerClicked.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(e)),e.processBotAction=e.processBotAction.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default()(e)),e.disableEditor=!1,e}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default()(ChatBotIntroMessage,[{key:"addLoader",value:function(t,e){t["data-no-change"]||"button"!=t.type||(e.setAttribute("disabled","disabled"),e.innerHTML='<i class="material-icons">&#xf113;</i>'+e.innerHTML)}},{key:"abstractClick",value:function(t,e){var a=this.props.t;if(this.addLoader(t,e.target),-1!==t.onclick.indexOf("lhinst.updateTriggerClicked"))this.updateTriggerClicked({type:"triggerclicked"},t,e.target);else if(-1!==t.onclick.indexOf("notificationsLHC.sendNotification"));else if(-1!==t.onclick.indexOf("lhinst.buttonClicked"))this.updateTriggerClicked({type:""},t,e.target);else if(-1!==t.onclick.indexOf("lhinst.updateChatClicked"))this.updateTriggerClicked({type:"",mainType:"updatebuttonclicked"},t,e.target);else if(-1!==t.onclick.indexOf("lhinst.editGenericStep"))this.updateTriggerClicked({type:"editgenericstep"},t,e.target);else if(-1!==t.onclick.indexOf("lhinst.dropdownClicked")){var i=document.getElementById("id_generic_list-"+t["data-id"]);i&&"0"!=i.value&&""!=i.value?(t["data-payload"]=i.value,this.updateTriggerClicked({type:"valueclicked"},t,e.target)):alert(a("bot.please_choose"))}else helperFunctions.emitEvent("MessageClick",[t,this.props.dispatch]),console.log("Unknown click event: "+t.onclick);e.preventDefault()}},{key:"updateTriggerClicked",value:function(t,e,a){this.props.setBotPayload({type:t.type,payload:e["data-payload"],id:e["data-id"],processed:void 0===e["data-keep"]})}},{key:"processBotAction",value:function processBotAction(domNode){var attr=domNode.attribs;"lhinst.disableVisitorEditor"==attr["data-bot-action"]?this.disableEditor=!0:"lhinst.setDelay"==attr["data-bot-action"]||"execute-js"==attr["data-bot-action"]&&eval(domNode.children[0].data)}},{key:"render",value:function(){var t=this;return html_react_parser__WEBPACK_IMPORTED_MODULE_8___default()(this.props.content,{replace:function(e){if(e.attribs){var a=Object.assign({},e.attribs);if(e.attribs.onclick&&delete e.attribs.onclick,e.name&&"button"===e.name){if(a.onclick)return react__WEBPACK_IMPORTED_MODULE_7__.createElement("button",_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({},e.attribs,{onClick:function(e){return t.abstractClick(a,e)}}),(0,html_react_parser__WEBPACK_IMPORTED_MODULE_8__.domToReact)(e.children))}else if(e.name&&"a"===e.name){if(a.onclick)return react__WEBPACK_IMPORTED_MODULE_7__.createElement("a",_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_0___default()({},e.attribs,{onClick:function(e){return t.abstractClick(a,e)}}),(0,html_react_parser__WEBPACK_IMPORTED_MODULE_8__.domToReact)(e.children))}else e.name&&"script"===e.name&&e.attribs["data-bot-action"]&&t.processBotAction(e)}}})}}]),ChatBotIntroMessage}(react__WEBPACK_IMPORTED_MODULE_7__.PureComponent);const __WEBPACK_DEFAULT_EXPORT__=ChatBotIntroMessage},5198:(t,e,a)=>{"use strict";a.d(e,{Z:()=>w});var i=a(4575),n=a.n(i),s=a(3913),r=a.n(s),o=a(1506),l=a.n(o),c=a(2205),p=a.n(c),h=a(8585),d=a.n(h),u=a(9754),g=a.n(u),_=a(7294),m=a(7139),f=a(6512),v=a(6458);var b=function(t){p()(s,t);var e,a,i=(e=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=g()(e);if(a){var n=g()(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return d()(this,t)});function s(t){var e;return n()(this,s),(e=i.call(this,t)).onchangeAttr=e.onchangeAttr.bind(l()(e)),e.onchangeAttrProduct=e.onchangeAttrProduct.bind(l()(e)),e}return r()(s,[{key:"onchangeAttr",value:function(t){this.props.onChangeContent({id:"DepartamentID",value:t.value}),!0===this.props.departments.getIn(["settings","product_by_department"])&&this.props.dispatch((0,f.Xp)({dep_id:t.value}))}},{key:"onchangeAttrProduct",value:function(t){this.props.onChangeContent({id:"ProductID",value:t.value})}},{key:"componentDidMount",value:function(){!0!==this.props.departments.getIn(["settings","product"])||!0!==this.props.departments.getIn(["settings","product_by_department"])&&!this.props.departments.has("products")||this.props.onChangeContent({id:"HasProductID",value:!0}),0!=this.props.departments.get("departments").size&&(1!=this.props.departments.get("departments").size&&this.props.departments.hasIn(["settings","optional"])?this.props.departments.get("departments").size>1&&this.onchangeAttr({value:-1}):this.onchangeAttr({value:this.props.setDefaultValue||this.props.departments.getIn(["departments",0]).get("value")}))}},{key:"render",value:function(){var t=this,e=this.props.t,a=null;if(this.props.departments.get("departments").size>1&&!this.props.departments.hasIn(["settings","hide_department"])){var i=["form-control","form-control-sm"];!0===this.props.isInvalid&&i.push("is-invalid");var n=this.props.departments.get("departments").map((function(t){return _.createElement("option",{key:"dep-"+t.get("value"),value:t.get("value")},t.get("name")," ",t.get("online")?"":e("department.offline"))}));a=_.createElement("div",{className:"form-group"},_.createElement("label",{className:"control-label"},this.props.departments.getIn(["settings","label"]),"*"),_.createElement("select",{id:"id-department-field",defaultValue:this.props.setDefaultValue||this.props.defaultValueField,className:i.join(" "),onChange:function(e){return t.onchangeAttr({value:e.target.value})}},this.props.departments.hasIn(["settings","optional"])&&_.createElement("option",{value:"-1"},this.props.departments.getIn(["settings","optional"])),n))}var s=null;if(!0===this.props.departments.getIn(["settings","product"])){var r=["form-control","form-control-sm"];!0===this.props.isInvalidProduct&&r.push("is-invalid");var o=this.props.departments.has("products")?this.props.departments.get("products").map((function(t){return _.createElement("option",{key:"product-"+t.get("value"),value:t.get("value")},t.get("name"))})):"";this.props.departments.has("products")&&this.props.departments.get("products").size>0&&(s=_.createElement("div",{className:"form-group"},_.createElement("label",{className:"control-label"},e("department.product"),!0===this.props.departments.getIn(["settings","product_required"])?"*":""),_.createElement("select",{className:r.join(" "),onChange:function(e){return t.onchangeAttrProduct({value:e.target.value})}},_.createElement("option",{value:""},e("department.choose_a_product")),o)))}return null!==s||null!==a?_.createElement("div",{className:"col-12"},a,s):null}}]),s}(_.Component);const w=(0,v.$j)()((0,m.Z)()(b))},7786:(t,e,a)=>{"use strict";a.d(e,{Z:()=>w});var i=a(4575),n=a.n(i),s=a(3913),r=a.n(s),o=a(1506),l=a.n(o),c=a(2205),p=a.n(c),h=a(8585),d=a.n(h),u=a(9754),g=a.n(u),_=a(9713),m=a.n(_),f=a(7294),v=a(7139);var b=function(t){p()(s,t);var e,a,i=(e=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=g()(e);if(a){var n=g()(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return d()(this,t)});function s(t){var e;return n()(this,s),e=i.call(this,t),m()(l()(e),"state",{hiddenIfPrefilled:!1}),e.onchangeAttr=e.onchangeAttr.bind(l()(e)),e.onFileAdded=e.onFileAdded.bind(l()(e)),e}return r()(s,[{key:"onchangeAttr",value:function(t){this.props.onChangeContent({id:this.props.field.get("name"),value:t.value,field:this.props.field})}},{key:"onFileAdded",value:function(t){for(var e=this,a=t.target.files,i=[],n=0;n<a.length;n++)i.push(a.item(n));if(0==a.length)return null;var s=new RegExp("(.|/)("+this.props.field.get("ft_us")+")$","i"),r=this.props.t,o=[];i.forEach((function(t){s.test(t.type)||s.test(t.name)||o.push(t.name+": "+r("file.incorrect_type")),t.size>e.props.field.get("fs")&&o.push(t.name+": "+r("file.to_big_file"))})),o.length>0?alert(o.join("\n")):this.props.onChangeContent({id:this.props.field.get("name"),value:i[0],field:this.props.field})}},{key:"componentDidMount",value:function(){var t=this;"checkbox"==this.props.field.get("type")&&1==this.props.field.get("default")?this.props.onChangeContent({id:this.props.field.get("name"),value:!0}):"dropdown"==this.props.field.get("type")&&this.props.onChangeContent({id:this.props.field.get("name"),value:this.props.defaultValueField}),this.props.attrPrefill&&this.props.attrPrefill.attr_prefill_admin&&this.props.attrPrefill.attr_prefill_admin.forEach((function(e){(e.index==t.props.field.get("identifier")||t.props.field.has("identifier_prefill")&&e.index==t.props.field.get("identifier_prefill"))&&(t.props.onChangeContent({id:t.props.field.get("name"),value:e.value}),t.props.field.has("hide_prefilled")&&1==t.props.field.get("hide_prefilled")&&!1===t.props.isInvalid&&t.setState({hiddenIfPrefilled:!0}))}))}},{key:"render",value:function(){var t=this;if(!0===this.state.hiddenIfPrefilled&&!0!==this.props.isInvalid)return null;var e="col-"+this.props.field.get("width"),a=!0===this.props.field.get("required"),i=[];if(""!=this.props.field.get("class")&&i.push(this.props.field.get("class")),!0===this.props.isInvalid&&i.push("is-invalid"),"text"==this.props.field.get("type"))return f.createElement("div",{className:e},f.createElement("div",{className:"form-group"},f.createElement("label",{className:"control-label"},this.props.field.get("label"),!0===a?"*":""),f.createElement("input",{type:"text",className:i.join(" "),required:a,onChange:function(e){return t.onchangeAttr({value:e.target.value})},name:this.props.field.get("name"),defaultValue:this.props.defaultValueField,placeholder:this.props.field.get("placeholder")})));if("password"==this.props.field.get("type"))return f.createElement("div",{className:e},f.createElement("div",{className:"form-group"},f.createElement("label",{className:"control-label"},this.props.field.get("label"),!0===a?"*":""),f.createElement("input",{type:"password",autocomplete:"new-password",className:i.join(" "),required:a,onChange:function(e){return t.onchangeAttr({value:e.target.value})},name:this.props.field.get("name"),defaultValue:this.props.defaultValueField,placeholder:this.props.field.get("placeholder")})));if("textarea"==this.props.field.get("type"))return f.createElement("div",{className:e},f.createElement("div",{className:"form-group"},!this.props.chatUI.has("hide_message_label")&&"question"==this.props.field.get("identifier")&&f.createElement("label",{className:"control-label"},this.props.field.get("label"),!0===a?"*":""),f.createElement("textarea",{className:i.join(" "),required:a,onChange:function(e){return t.onchangeAttr({value:e.target.value})},name:this.props.field.get("name"),defaultValue:this.props.defaultValueField,placeholder:this.props.field.get("placeholder")})));if("file"==this.props.field.get("type"))return f.createElement("div",{className:e},f.createElement("div",{className:"form-group overflow-hidden"},f.createElement("label",{className:"control-label"},this.props.field.get("label"),!0===a?"*":""),f.createElement("input",{type:"file",onChange:function(e){return t.onFileAdded(e)},className:this.props.field.get("class"),required:a,name:this.props.field.get("name")})));if("checkbox"==this.props.field.get("type"))return f.createElement("div",{className:e},f.createElement("div",{className:"form-group"},f.createElement("div",{className:"form-check"},f.createElement("input",{className:i.join(" "),id:"check-for-"+this.props.field.get("name"),defaultChecked:this.props.field.get("default"),type:"checkbox",value:"on",onChange:function(e){return t.onchangeAttr({value:e.target.checked})},required:a,name:this.props.field.get("name")}),f.createElement("label",{className:"form-check-label",for:"check-for-"+this.props.field.get("name"),dangerouslySetInnerHTML:{__html:this.props.field.get("label")}}))));if("hidden"==this.props.field.get("type"))return f.createElement("input",{type:"hidden",className:i.join(" "),required:a,onChange:function(e){return t.onchangeAttr({value:e.target.value})},name:this.props.field.get("name"),defaultValue:this.props.defaultValueField,placeholder:this.props.field.get("placeholder")});if("dropdown"==this.props.field.get("type")){var n=this.props.field.get("options").map((function(e){return f.createElement("option",{key:"opt-drop-"+e.get("value"),selected:t.props.defaultValueField==e.get("value"),value:e.get("value")},e.get("name"))}));return f.createElement("div",{className:e},f.createElement("div",{className:"form-group"},f.createElement("label",{className:"control-label"},this.props.field.get("label"),!0===a?"*":""),f.createElement("select",{className:i.join(" "),required:a,onChange:function(e){return t.onchangeAttr({value:e.target.value})},name:this.props.field.get("name"),defaultValue:this.props.defaultValueField},n)))}return console.log("Unknown field"),null}}]),s}(f.Component);const w=(0,v.Z)()(b)},2446:(t,e,a)=>{"use strict";a.d(e,{Z:()=>k});var i=a(7154),n=a.n(i),s=a(4575),r=a.n(s),o=a(3913),l=a.n(o),c=a(1506),p=a.n(c),h=a(2205),d=a.n(h),u=a(8585),g=a.n(u),_=a(9754),m=a.n(_),f=a(9713),v=a.n(f),b=a(7294),w=a(9669),E=a.n(w),y=a(488),I=a.n(y),C=a(7139),D=a(298),P=a.n(D);var O=function(t){d()(o,t);var e,i,s=(e=o,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=m()(e);if(i){var n=m()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return g()(this,t)});function o(t){var e;return r()(this,o),e=s.call(this,t),v()(p()(e),"state",{body:null}),v()(p()(e),"dismissModal",(function(){e.props.toggle()})),v()(p()(e),"generalOnClick",(function(t){var a=e.props.t,i=t["data-bb-code"];if(t["data-promt"]&&"img"==t["data-promt"])(n=prompt(a("bbcode.img_link")))&&(i="["+i+"]"+n+"[/"+i+"]");else if(t["data-promt"]&&"url"==t["data-promt"]){var n;(n=prompt(a("bbcode.link")))&&(i="[url="+n+"]"+a("bbcode.link_here")+"[/url]")}e.props.insertText(i),e.props.toggle()})),v()(p()(e),"generalDataActionClick",(function(t){t["data-action"]&&e.props[t["data-action"]]&&e.props[t["data-action"]]()})),e}return l()(o,[{key:"componentDidMount",value:function(){var t=this;E().get(window.lhcChat.base_url+this.props.dataUrl).then((function(e){t.setState({body:e.data});var i=document.getElementById("dialog-content"),n=a(9539),s=i.querySelectorAll('[data-toggle="tab"]');if(s.length>0){var r=0;Array.prototype.forEach.call(s,(function(t){new n.Tab(t)}));var o=new(P())(".tab-content");o.onSwipeLeft((function(){r=r<s.length-1?r+1:0,s[r].Tab.show()})),o.onSwipeRight((function(){r=r>0?r-1:s.length-1,s[r].Tab.show()}))}})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){var t=this;return b.createElement(b.Fragment,null,null!==this.state.body&&b.createElement("div",{className:"fade modal-backdrop show"}),null!==this.state.body&&b.createElement("div",{role:"dialog",id:"dialog-content","aria-modal":"true",className:"fade modal show d-block",tabIndex:"-1"},I()(this.state.body,{replace:function(e){if(e.attribs&&"react-close-modal"===e.attribs.id)return b.createElement("button",{type:"button",className:"close float-right","data-dismiss":"modal",onClick:t.dismissModal,"aria-label":"Close"},b.createElement("span",{"aria-hidden":"true"},"×"));if(e.attribs&&e.attribs.bbitem)return e.attribs.class&&(e.attribs.className=e.attribs.class,delete e.attribs.class),b.createElement("a",n()({},e.attribs,{onClick:function(a){return t.generalOnClick(e.attribs)}}),(0,y.domToReact)(e.children));if(e.type&&"tag"===e.type&&e.name&&"input"==e.name&&e.attribs&&e.attribs.type&&"button"==e.attribs.type)return e.attribs.class&&(e.attribs.className=e.attribs.class,delete e.attribs.class),b.createElement("input",n()({},e.attribs,{onClick:function(a){return t.generalDataActionClick(e.attribs)}}));if(e.type&&"script"===e.type){if(e.children.length>0)setTimeout((function(){var t=document.createElement("script");t.appendChild(document.createTextNode(e.children[0].data)),document.getElementsByTagName("head").item(0).appendChild(t)}),500);else if(e.attribs&&e.attribs.src){var a=document.createElement("script");a.src=e.attribs.src,a.type="text/javascript",document.getElementsByTagName("head").item(0).appendChild(a)}return b.createElement(b.Fragment,null)}}})))}}]),o}(b.PureComponent);const k=(0,C.Z)()(O)},9702:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>x});var i=a(4575),n=a.n(i),s=a(3913),r=a.n(s),o=a(1506),l=a.n(o),c=a(2205),p=a.n(c),h=a(8585),d=a.n(h),u=a(9754),g=a.n(u),_=a(9713),m=a.n(_),f=a(7294),v=a(6458),b=a(7139),w=a(7786),E=a(3038),y=a.n(E);const I=function(t){p()(s,t);var e,a,i=(e=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=g()(e);if(a){var n=g()(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return d()(this,t)});function s(t){return n()(this,s),i.call(this,t)}return r()(s,[{key:"render",value:function(){var t=this.props.errors.mapEntries((function(t){var e=y()(t,2),a=e[0],i=e[1];if("captcha"==a||"blocked_user"==a||!isNaN(a))return[f.createElement("li",null,i)]}));return t.size>0?f.createElement("div",{"data-alert":"",className:"mt-2 alert alert-danger alert-dismissible fade show"},f.createElement("ul",{className:"pl-1 m-0"},t)):null}}]),s}(f.Component);var C=a(5198),D=a(2446);const P=function(t){p()(o,t);var e,i,s=(e=o,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,a=g()(e);if(i){var n=g()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return d()(this,t)});function o(t){return n()(this,o),s.call(this,t)}return r()(o,[{key:"componentDidMount",value:function(){new(a(9539).Dropdown)(document.getElementById("chat-dropdown-options"))}},{key:"render",value:function(){var t=this;return f.createElement("div",{className:"btn-group dropup disable-select pl-2 pt-2"},f.createElement("i",{className:"material-icons settings text-muted",id:"chat-dropdown-options","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},""),f.createElement("div",{className:"dropdown-menu shadow bg-white lhc-dropdown-menu rounded ml-1"},f.createElement("div",{className:"d-flex flex-row px-1"},f.createElement("a",{onClick:function(e){return t.props.toggleModal()}},f.createElement("i",{className:"material-icons chat-setting-item text-muted mr-0"},"")))))}}]),o}(f.PureComponent);var O=a(2137),k=a(5918);const M=function(t){p()(s,t);var e,a,i=(e=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=g()(e);if(a){var n=g()(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return d()(this,t)});function s(t){return n()(this,s),i.call(this,t)}return r()(s,[{key:"componentDidMount",value:function(){O.a.sendMessageParent("readInvitation",[{name:this.props.invitation.invitation_name||"Manual"}])}},{key:"render",value:function(){return"message"==this.props.mode?f.createElement(f.Fragment,null,this.props.invitation.prev_msg&&f.createElement(k.Z,{setBotPayload:this.props.setBotPayload,content:this.props.invitation.prev_msg}),this.props.invitation.message&&f.createElement("div",{className:"message-row message-admin"},f.createElement("span",{className:"usr-tit op-tit"},f.createElement("i",{title:this.props.invitation.name_support||this.props.invitation.extra_profile,className:"chat-operators mi-fs15 mr-0"},this.props.invitation.bubble&&this.props.invitation.photo&&f.createElement("img",{src:this.props.invitation.photo,alt:"",className:"profile-msg-pic"}),(!this.props.invitation.photo||!this.props.invitation.bubble)&&f.createElement("i",{className:"material-icons "+(this.props.invitation.bubble?"icon-assistant mr-0":"")},"")),!this.props.invitation.bubble&&(this.props.invitation.name_support||this.props.invitation.extra_profile)),f.createElement("div",{className:"msg-body",dangerouslySetInnerHTML:{__html:this.props.invitation.message}})),this.props.invitation.message_full&&f.createElement(k.Z,{setBotPayload:this.props.setBotPayload,content:this.props.invitation.message_full})):f.createElement(f.Fragment,null,f.createElement("div",{id:"lhc-profile-body"},f.createElement("div",{id:"chat-status-container",className:"operator-info d-flex border-bottom p-2"},f.createElement("div",null,this.props.invitation.photo&&f.createElement("img",{width:"48",height:"48",src:this.props.invitation.photo,title:this.props.invitation.photo_title,alt:""}),!this.props.invitation.photo&&f.createElement("i",{className:"icon-assistant material-icons mr-0"},"")),f.createElement("div",{className:"p-1 pl-2 w-100"},this.props.invitation.name_support&&!this.props.invitation.hide_name&&f.createElement("div",{className:"font-weight-bold"},this.props.invitation.name_support),this.props.invitation.extra_profile&&f.createElement("i",null,this.props.invitation.extra_profile)))),"profile_only"!=this.props.mode&&this.props.invitation.message&&f.createElement("div",{id:"messagesBlock"},f.createElement("div",{className:"bottom-message position-relative"},f.createElement("div",{className:"message-row message-admin pt-1 text-left ml-3"},f.createElement("div",{className:"msg-body",dangerouslySetInnerHTML:{__html:this.props.invitation.message}})))))}}]),s}(f.PureComponent);var R,T=a(6313),B=a(6512);function A(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function N(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?A(Object(a),!0).forEach((function(e){m()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var S=(0,v.$j)((function(t){return{chatwidget:t.chatwidget}}))(R=function(t){p()(s,t);var e,a,i=(e=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=g()(e);if(a){var n=g()(this).constructor;t=Reflect.construct(i,arguments,n)}else t=i.apply(this,arguments);return d()(this,t)});function s(t){var e;return n()(this,s),e=i.call(this,t),m()(l()(e),"insertText",(function(t){var a=e.textMessageRef.current.selectionStart;e.setState({Question:e.state.Question.substring(0,a)+t+e.state.Question.substring(a)})})),e.apiLoaded=!1,e.state={showBBCode:null,Question:""},e.botPayload=null,e.handleSubmit=e.handleSubmit.bind(l()(e)),e.enterKeyDown=e.enterKeyDown.bind(l()(e)),e.handleContentChange=e.handleContentChange.bind(l()(e)),e.handleContentChangeCustom=e.handleContentChangeCustom.bind(l()(e)),e.setBotPayload=e.setBotPayload.bind(l()(e)),e.toggleModal=e.toggleModal.bind(l()(e)),e.textMessageRef=f.createRef(),e.messagesAreaRef=f.createRef(),e}return r()(s,[{key:"toggleModal",value:function(){this.setState({showBBCode:!this.state.showBBCode})}},{key:"enterKeyDown",value:function(t){"Enter"!==t.key||t.shiftKey||(this.handleSubmit(t),t.preventDefault())}},{key:"handleSubmit",value:function(t){if(0==this.props.chatwidget.get("processStatus")){var e=document.getElementById("CSChatMessage");null!==e&&(e.focus(),this.props.setHideMessageField(!1));var a=this.state;a.jsvar=this.props.chatwidget.get("jsVars"),a["captcha_"+this.props.chatwidget.getIn(["captcha","hash"])]=this.props.chatwidget.getIn(["captcha","ts"]),a.tscaptcha=this.props.chatwidget.getIn(["captcha","ts"]),a.user_timezone=O.a.getTimeZone(),a.URLRefer=window.location.href.substring(window.location.protocol.length),a.r=this.props.chatwidget.get("ses_ref"),""!=this.props.chatwidget.get("bot_id")&&(a.bot_id=this.props.chatwidget.get("bot_id")),""!=this.props.chatwidget.get("trigger_id")&&(a.trigger_id=this.props.chatwidget.get("trigger_id")),""!=this.props.chatwidget.get("operator")&&(a.operator=this.props.chatwidget.get("operator")),null!==this.props.chatwidget.get("pvhash")&&(a.pvhash=this.props.chatwidget.get("pvhash")),null!==this.props.chatwidget.get("priority")&&(a.priority=this.props.chatwidget.get("priority")),null!==this.props.chatwidget.get("phash")&&(a.phash=this.props.chatwidget.get("phash"));var i=O.a.getCustomFieldsSubmit(this.props.chatwidget.getIn(["customData","fields"]));null!==i&&(a=N(N({},a),i));var n={department:this.props.chatwidget.get("department"),theme:this.props.chatwidget.get("theme"),mode:this.props.chatwidget.get("mode"),vid:this.props.chatwidget.get("vid"),fields:a};this.botPayload&&(n.bpayload=this.botPayload,this.botPayload=null),!0===this.props.chatwidget.hasIn(["proactive","data","invitation_id"])&&(n.invitation_id=this.props.chatwidget.getIn(["proactive","data","invitation_id"])),this.props.dispatch((0,B.Ym)(n)),t&&t.preventDefault()}}},{key:"handleContentChange",value:function(t){var e=this,a=this.state;a[t.id]=t.value,this.setState(a),"DepartamentID"==t.id&&this.props.chatwidget.getIn(["onlineData","department","departments"]).size>0&&this.props.chatwidget.getIn(["onlineData","department","departments"]).map((function(a){a.get("value")==t.value&&(0==a.get("online")&&(e.props.dispatch({type:"dep_default",data:t.value}),e.props.dispatch({type:"onlineStatus",data:!1})),e.props.chatwidget.getIn(["onlineData","dep_forms"])!=t.value&&e.updateOnlineFieldsInit(t.value))}))}},{key:"handleContentChangeCustom",value:function(t){this.props.dispatch({type:"CUSTOM_FIELDS_ITEM",data:{id:t.field.get("index"),value:t.value}})}},{key:"componentDidMount",value:function(){O.a.prefillFields(this),this.updateOnlineFields(),null!==this.props.botPayload&&this.setBotPayload(this.props.botPayload);var t=document.getElementById("CSChatMessage-tmp");null!==t&&document.body.removeChild(t)}},{key:"componentWillUnmount",value:function(){var t=document.getElementById("messagesBlock");null!==t&&this.props.setMessages(t.innerHTML);var e=document.getElementById("lhc-profile-body");null!==e&&this.props.setProfile(e.innerHTML);var a=document.getElementById("CSChatMessage");null===a?this.props.setHideMessageField(!0):(this.props.setHideMessageField(!1),a.id="CSChatMessage-tmp",a.style.cssText="position:absolute;left:-999px;bottom:0px;",document.body.appendChild(a))}},{key:"setBotPayload",value:function(t){this.botPayload=t,this.handleSubmit()}},{key:"updateOnlineFieldsInit",value:function(t){this.props.dispatch((0,B.El)({department:this.props.chatwidget.get("department"),product:this.props.chatwidget.get("product"),theme:this.props.chatwidget.get("theme"),mode:this.props.chatwidget.get("mode"),pvhash:this.props.chatwidget.get("pvhash"),phash:this.props.chatwidget.get("phash"),bot_id:this.props.chatwidget.get("bot_id"),trigger_id:this.props.chatwidget.get("trigger_id"),vid:this.props.chatwidget.get("vid"),dep_default:t||this.props.chatwidget.get("departmentDefault")||0,online:1}))}},{key:"updateOnlineFields",value:function(){!1===this.props.chatwidget.getIn(["onlineData","fetched"])&&this.updateOnlineFieldsInit()}},{key:"componentDidUpdate",value:function(t,e,a){this.updateOnlineFields(),document.getElementById("id-container-fluid")&&O.a.sendMessageParent("widgetHeight",[{height:document.getElementById("id-container-fluid").offsetHeight+40}]);var i=!1;if(!1===this.apiLoaded&&null!==this.props.chatwidget.get("api_data")&&(this.apiLoaded=!0,this.setState(N(N({},this.state),this.props.chatwidget.get("api_data"))),i=!0),(!0===i||0==this.props.chatwidget.get("isMobile")&&!1===t.chatwidget.get("shown")&&!0===this.props.chatwidget.get("shown"))&&"widget"==this.props.chatwidget.get("mode")&&this.textMessageRef.current&&(this.textMessageRef.current.focus(),this.scrollBottom()),!0===this.props.chatwidget.getIn(["onlineData","fetched"])&&!1===t.chatwidget.getIn(["onlineData","fetched"])&&(this.props.chatwidget.hasIn(["chat_ui","uprev"])&&O.a.emitEvent("play_sound",[{type:"new_message",sound_on:!0===this.props.chatwidget.getIn(["usersettings","soundOn"]),widget_open:this.props.chatwidget.get("shown")&&"widget"==this.props.chatwidget.get("mode")||document.hasFocus()}]),this.scrollBottom()),this.props.chatwidget.get("departmentDefault")!==t.chatwidget.get("departmentDefault")){this.setState({DepartamentID:this.props.chatwidget.get("departmentDefault")});var n=document.getElementById("id-department-field");null!==n&&(n.value=this.props.chatwidget.get("departmentDefault")),this.updateOnlineFieldsInit()}}},{key:"scrollBottom",value:function(){var t=this;this.messagesAreaRef.current&&(this.messagesAreaRef.current.scrollTop=this.messagesAreaRef.current.scrollHeight+1e3,setTimeout((function(){t.messagesAreaRef.current&&(t.messagesAreaRef.current.scrollTop=t.messagesAreaRef.current.scrollHeight+1e3)}),450))}},{key:"moveCaretAtEnd",value:function(t){var e=t.target.value;t.target.value="",t.target.value=e}},{key:"render",value:function(){var t=this,e=this.props.t;if(!0===this.props.chatwidget.getIn(["onlineData","fetched"])&&!0===this.props.chatwidget.getIn(["onlineData","disabled"]))return f.createElement("div",{className:"alert alert-danger m-2",role:"alert"},e("start_chat.cant_start_a_chat"));if(!1===this.props.chatwidget.getIn(["onlineData","fetched"])||!0===this.props.chatwidget.getIn(["chat_ui","auto_start"]))return null;if(this.props.chatwidget.getIn(["onlineData","fields"]).size>0&&(!this.props.chatwidget.hasIn(["chat_ui","show_messages_box"])||1!=this.props.chatwidget.getIn(["onlineData","fields_visible"])||0!=this.props.chatwidget.getIn(["customData","fields"]).size))var a=this.props.chatwidget.getIn(["onlineData","fields"]).map((function(e){return f.createElement(w.Z,{chatUI:t.props.chatwidget.get("chat_ui"),key:e.get("identifier"),isInvalid:t.props.chatwidget.hasIn(["validationErrors",e.get("identifier")]),defaultValueField:t.state[e.get("name")]||e.get("value"),attrPrefill:{attr_prefill_admin:t.props.chatwidget.get("attr_prefill_admin"),attr_prefill:t.props.chatwidget.get("attr_prefill")},onChangeContent:t.handleContentChange,field:e})}));else a="";var i=!1,n="";if(this.props.chatwidget.getIn(["customData","fields"]).size>0&&(this.props.chatwidget.getIn(["customData","fields"]).map((function(t){return i=!t.has("type")||"hidden"!==t.get("type")||i})),1==i&&(n=this.props.chatwidget.getIn(["customData","fields"]).map((function(e){return f.createElement(w.Z,{chatUI:t.props.chatwidget.get("chat_ui"),key:e.get("identifier"),isInvalid:t.props.chatwidget.hasIn(["validationErrors",e.get("identifier")]),defaultValueField:e.get("value"),onChangeContent:t.handleContentChangeCustom,field:e})})))),this.props.chatwidget.hasIn(["onlineData","paid","error"])&&this.props.chatwidget.getIn(["onlineData","paid","error"]))return f.createElement("p",{className:"p-2"},this.props.chatwidget.getIn(["onlineData","paid","message"]));if(0==this.props.chatwidget.get("processStatus")||1==this.props.chatwidget.get("processStatus")){if(this.props.chatwidget.hasIn(["chat_ui","show_messages_box"])&&this.props.chatwidget.getIn(["onlineData","department","departments"]).size<=1&&this.props.chatwidget.getIn(["onlineData","fields_visible"])<=1&&(0==this.props.chatwidget.getIn(["customData","fields"]).size||!1===i)){var s="pl-0 no-outline form-control rounded-0 form-control border-left-0 border-right-0 border-0 "+(!0===this.props.chatwidget.get("shown")&&this.textMessageRef.current&&(/\r|\n/.exec(this.state.Question)||this.state.Question.length>this.textMessageRef.current.offsetWidth/8.6)?"msg-two-line":"msg-one-line"),r="flex-grow-1 overflow-scroll position-relative",o="bottom-message px-1";return this.props.chatwidget.hasIn(["chat_ui","msg_expand"])&&"embed"==this.props.chatwidget.get("mode")&&(r="overflow-scroll position-relative",o+=" position-relative"),f.createElement(f.Fragment,null,this.state.showBBCode&&f.createElement(D.Z,{showModal:this.state.showBBCode,insertText:this.insertText,toggle:this.toggleModal,dataUrl:"/chat/bbcodeinsert?react=1"}),this.props.chatwidget.hasIn(["validationErrors","blocked_user"])&&f.createElement(T.Z,{closeText:e("button.close"),close:function(e){return t.props.dispatch((0,B.H7)(!0))},text:this.props.chatwidget.getIn(["validationErrors","blocked_user"])}),!0===this.props.chatwidget.getIn(["proactive","has"])&&!this.props.chatwidget.hasIn(["proactive","data","std_header"])&&f.createElement(M,{mode:"profile_only",invitation:this.props.chatwidget.getIn(["proactive","data"])})||this.props.chatwidget.hasIn(["chat_ui","operator_profile"])&&""!=this.props.chatwidget.getIn(["chat_ui","operator_profile"])&&f.createElement("div",{id:"lhc-profile-body"},f.createElement("div",{id:"chat-status-container",className:"p-2 border-bottom",dangerouslySetInnerHTML:{__html:this.props.chatwidget.getIn(["chat_ui","operator_profile"])}})),f.createElement("div",{className:r,id:"messagesBlock"},f.createElement("div",{className:o,id:"messages-scroll",ref:this.messagesAreaRef},!0===this.props.chatwidget.getIn(["proactive","has"])&&f.createElement(M,{mode:"message",setBotPayload:this.setBotPayload,invitation:this.props.chatwidget.getIn(["proactive","data"])}),!this.props.chatwidget.getIn(["proactive","has"])&&this.props.chatwidget.hasIn(["chat_ui","cmmsg_widget"])&&f.createElement(k.Z,{setBotPayload:this.setBotPayload,content:this.props.chatwidget.getIn(["chat_ui","cmmsg_widget"])}),1==this.props.chatwidget.get("processStatus")&&""!=this.state.Question&&f.createElement("div",{"data-op-id":"0",className:"message-row response"},f.createElement("div",{className:"msg-date"}),f.createElement("span",{title:"",className:"usr-tit vis-tit"},f.createElement("i",{title:e("start_chat.visitor"),className:"material-icons chat-operators mi-fs15 mr-0"},""),f.createElement("span",{className:"user-nick-title"},e("start_chat.visitor"))),f.createElement("div",{className:"msg-body"},this.state.Question)))),!this.props.chatwidget.getIn(["proactive","has"])&&this.props.chatwidget.hasIn(["chat_ui","custom_html_widget"])&&f.createElement("div",{className:"custom-html-container "+(""!=this.state.Question?"visitor-started-type":""),dangerouslySetInnerHTML:{__html:this.props.chatwidget.getIn(["chat_ui","custom_html_widget"])}}),(1==this.props.chatwidget.getIn(["onlineData","fields_visible"])||0==this.props.chatwidget.getIn(["onlineData","fields_visible"])&&!this.props.chatwidget.hasIn(["chat_ui","hstr_btn"]))&&f.createElement("div",{className:"d-flex flex-row border-top position-relative message-send-area"},this.props.chatwidget.hasIn(["validationErrors","question"])&&f.createElement("div",{id:"id-operator-typing",className:"bg-white pl-1"},this.props.chatwidget.getIn(["validationErrors","question"])),1==this.props.chatwidget.getIn(["onlineData","fields_visible"])&&f.createElement(f.Fragment,null,!this.props.chatwidget.hasIn(["chat_ui","bbc_btnh"])&&f.createElement(P,{toggleModal:this.toggleModal}),f.createElement("div",{className:"mx-auto w-100"},f.createElement("textarea",{autoFocus:0==this.props.chatwidget.get("isMobile")&&"widget"==this.props.chatwidget.get("mode")&&!0===this.props.chatwidget.get("shown"),onFocus:this.moveCaretAtEnd,maxLength:this.props.chatwidget.getIn(["chat_ui","max_length"]),"aria-label":"Type your message here...",id:"CSChatMessage",value:1==this.props.chatwidget.get("processStatus")?"":this.state.Question,placeholder:this.props.chatwidget.hasIn(["chat_ui","placeholder_message"])?this.props.chatwidget.getIn(["chat_ui","placeholder_message"]):e("chat.type_here"),onKeyDown:this.enterKeyDown,onChange:function(e){return t.handleContentChange({id:"Question",value:e.target.value})},ref:this.textMessageRef,rows:"1",className:s})),f.createElement("div",{className:"disable-select"},f.createElement("div",{className:"user-chatwidget-buttons pt-1",id:"ChatSendButtonContainer"},1!=this.props.chatwidget.get("processStatus")&&f.createElement("a",{onClick:this.handleSubmit,title:e("button.start_chat")},f.createElement("i",{className:"material-icons text-muted settings"},"")),1==this.props.chatwidget.get("processStatus")&&f.createElement("i",{className:"material-icons text-muted settings mr-0"},"")))),0==this.props.chatwidget.getIn(["onlineData","fields_visible"])&&!this.props.chatwidget.hasIn(["chat_ui","hstr_btn"])&&f.createElement("button",{className:"mx-auto pb-1 w-100 btn btn-light rounded-0",onClick:this.handleSubmit,title:e("button.start_chat")},this.props.chatwidget.getIn(["chat_ui","custom_start_button"])||e("button.start_chat_With_us"))))}return f.createElement("div",{id:"id-container-fluid"},!0===this.props.chatwidget.getIn(["proactive","has"])&&f.createElement(M,{mode:"profile",invitation:this.props.chatwidget.getIn(["proactive","data"])})||this.props.chatwidget.hasIn(["chat_ui","operator_profile"])&&""!=this.props.chatwidget.getIn(["chat_ui","operator_profile"])&&f.createElement("div",{className:"p-2"+(this.props.chatwidget.hasIn(["chat_ui","np_border"])?"":" border-bottom"),dangerouslySetInnerHTML:{__html:this.props.chatwidget.getIn(["chat_ui","operator_profile"])}}),f.createElement("div",{className:"container-fluid"},f.createElement(I,{errors:this.props.chatwidget.get("validationErrors")}),!this.props.chatwidget.getIn(["proactive","has"])&&this.props.chatwidget.hasIn(["chat_ui","custom_html_widget"])&&f.createElement("div",{className:"custom-html-container",dangerouslySetInnerHTML:{__html:this.props.chatwidget.getIn(["chat_ui","custom_html_widget"])}}),f.createElement("form",{onSubmit:this.handleSubmit},f.createElement("div",{className:"row pt-2"},a,n,this.props.chatwidget.hasIn(["onlineData","department"])&&f.createElement(C.Z,{defaultValueField:this.state.DepartamentID,setDefaultValue:this.props.chatwidget.get("departmentDefault"),onChangeContent:this.handleContentChange,isInvalidProduct:this.props.chatwidget.hasIn(["validationErrors","ProductID"]),isInvalid:this.props.chatwidget.hasIn(["validationErrors","department"]),departments:this.props.chatwidget.getIn(["onlineData","department"])})),(!this.props.chatwidget.hasIn(["chat_ui","hstr_btn"])||""!==n||""!==a||!0===this.props.chatwidget.getIn(["proactive","has"]))&&f.createElement("div",{className:"row"},f.createElement("div",{className:"col-12 pb-3"},f.createElement("button",{disabled:1==this.props.chatwidget.get("processStatus"),type:"submit",className:"btn btn-secondary btn-sm"},this.props.chatwidget.getIn(["chat_ui","custom_start_button"])||e("button.start_chat")))))))}return 2==this.props.chatwidget.get("processStatus")?f.createElement("div",{className:"container-fluid",id:"id-container-fluid"},f.createElement("div",{className:"row"},f.createElement("div",{className:"col-12"},f.createElement("p",null,e("start_chat.thank_you_for_feedback"))))):void 0}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.chatwidget.getIn(["chat_ui","auto_start"])&&0==t.chatwidget.get("processStatus")&&("embed"==t.chatwidget.get("mode")||"popup"==t.chatwidget.get("mode")||"widget"==t.chatwidget.get("mode")&&1==t.chatwidget.get("shown"))){var a=e;a.jsvar=t.chatwidget.get("jsVars"),a["captcha_"+t.chatwidget.getIn(["captcha","hash"])]=t.chatwidget.getIn(["captcha","ts"]),a.tscaptcha=t.chatwidget.getIn(["captcha","ts"]),a.user_timezone=O.a.getTimeZone(),a.URLRefer=window.location.href.substring(window.location.protocol.length),a.r=t.chatwidget.get("ses_ref"),""!=t.chatwidget.get("bot_id")&&(a.bot_id=t.chatwidget.get("bot_id")),""!=t.chatwidget.get("trigger_id")&&(a.trigger_id=t.chatwidget.get("trigger_id")),""!=t.chatwidget.get("operator")&&(a.operator=t.chatwidget.get("operator")),null!==t.chatwidget.get("priority")&&(a.priority=t.chatwidget.get("priority")),null!==t.chatwidget.get("pvhash")&&(a.pvhash=t.chatwidget.get("pvhash")),null!==t.chatwidget.get("phash")&&(a.phash=t.chatwidget.get("phash"));var i=O.a.getCustomFieldsSubmit(t.chatwidget.getIn(["customData","fields"]));null!==i&&(a=N(N({},a),i)),null!==t.chatwidget.get("api_data")&&(a=N(N({},a),t.chatwidget.get("api_data")));var n={department:t.chatwidget.get("department"),theme:t.chatwidget.get("theme"),mode:t.chatwidget.get("mode"),vid:t.chatwidget.get("vid"),fields:a};null!==t.botPayload&&(n.bpayload=t.botPayload),!0===t.chatwidget.hasIn(["proactive","data","invitation_id"])&&(n.invitation_id=t.chatwidget.getIn(["proactive","data","invitation_id"])),t.dispatch((0,B.Ym)(n))}return null}}]),s}(f.Component))||R;const x=(0,b.Z)()(S)},298:t=>{"use strict";function e(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function a(t){for(var a,n=1;n<arguments.length;n++)a=null==arguments[n]?{}:arguments[n],n%2?e(Object(a),!0).forEach((function(e){i(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}));return t}function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const n={threshold:50,passive:!1};t.exports=class{constructor(t,e={}){this.options=a(a({},n),e),this.element=null,this.touchStartX=0,this.touchStartY=0,this.touchEndX=0,this.touchEndY=0,this.onSwipeLeftAgent=null,this.onSwipeRightAgent=null,this.onSwipeUpAgent=null,this.onSwipeDownAgent=null,this.onTapAgent=null,this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onSwipeLeft=this.onSwipeLeft.bind(this),this.onSwipeRight=this.onSwipeRight.bind(this),this.onSwipeUp=this.onSwipeUp.bind(this),this.onSwipeDown=this.onSwipeDown.bind(this),this.onTap=this.onTap.bind(this),this.destroy=this.destroy.bind(this),this.handleGesture=this.handleGesture.bind(this);let i=!!this.options.passive&&{passive:!0};this.element=t instanceof EventTarget?t:document.querySelector(t),this.element.addEventListener("touchstart",this.onTouchStart,i),this.element.addEventListener("touchend",this.onTouchEnd,i)}onTouchStart(t){this.touchStartX=t.changedTouches[0].screenX,this.touchStartY=t.changedTouches[0].screenY}onTouchEnd(t){this.touchEndX=t.changedTouches[0].screenX,this.touchEndY=t.changedTouches[0].screenY,this.handleGesture()}onSwipeLeft(t){this.onSwipeLeftAgent=t}onSwipeRight(t){this.onSwipeRightAgent=t}onSwipeUp(t){this.onSwipeUpAgent=t}onSwipeDown(t){this.onSwipeDownAgent=t}onTap(t){this.onTapAgent=t}destroy(){this.element.removeEventListener("touchstart",this.onTouchStart),this.element.removeEventListener("touchend",this.onTouchEnd)}handleGesture(){return this.touchEndX+this.options.threshold<=this.touchStartX?(this.onSwipeLeftAgent&&this.onSwipeLeftAgent(),"swiped left"):this.touchEndX-this.options.threshold>=this.touchStartX?(this.onSwipeRightAgent&&this.onSwipeRightAgent(),"swiped right"):this.touchEndY+this.options.threshold<=this.touchStartY?(this.onSwipeUpAgent&&this.onSwipeUpAgent(),"swiped up"):this.touchEndY-this.options.threshold>=this.touchStartY?(this.onSwipeDownAgent&&this.onSwipeDownAgent(),"swiped down"):this.touchEndY===this.touchStartY?(this.onTapAgent&&this.onTapAgent(),"tap"):void 0}}}}]);
//# sourceMappingURL=702.4b654084c68bceb0e11e.js.map