(window.webpackJsonpLHCReactAPP=window.webpackJsonpLHCReactAPP||[]).push([[1],{128:function(t,e,a){"use strict";a.r(e);var i,s=a(6),n=a.n(s),r=a(7),o=a.n(r),l=a(10),p=a.n(l),c=a(11),d=a.n(c),h=a(3),g=a.n(h),u=a(12),m=a.n(u),f=a(4),v=a.n(f),w=a(0),b=a.n(w),E=a(13),_=a(18),y=a(82),I=a(16),C=a.n(I),N=function(t){function e(t){return n()(this,e),p()(this,d()(e).call(this,t))}return m()(e,t),o()(e,[{key:"render",value:function(){var t=this.props.errors.mapEntries((function(t){var e=C()(t,2),a=e[0],i=e[1];if("captcha"==a)return[b.a.createElement("li",null,i)]}));return t.size>0?b.a.createElement("div",{"data-alert":"",className:"mt-2 alert alert-danger alert-dismissible fade show"},b.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},b.a.createElement("span",{"aria-hidden":"true"},"Ã—")),b.a.createElement("ul",{className:"pl-1 m-0"},t)):null}}]),e}(w.Component),k=a(83),D=a(80),x=function(t){function e(t){return n()(this,e),p()(this,d()(e).call(this,t))}return m()(e,t),o()(e,[{key:"componentDidMount",value:function(){new(a(39).Dropdown)(document.getElementById("chat-dropdown-options"))}},{key:"render",value:function(){var t=this;return b.a.createElement("div",{className:"btn-group dropup disable-select pl-2 pt-2"},b.a.createElement("i",{className:"material-icons settings text-muted",id:"chat-dropdown-options","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"settings"),b.a.createElement("div",{className:"dropdown-menu shadow bg-white lhc-dropdown-menu rounded ml-1"},b.a.createElement("div",{className:"d-flex flex-row px-1"},b.a.createElement("a",{onClick:function(e){return t.props.toggleModal()}},b.a.createElement("i",{className:"material-icons chat-setting-item text-muted mr-0"},"face")))))}}]),e}(w.PureComponent),S=a(1),M=function(t){function e(t){return n()(this,e),p()(this,d()(e).call(this,t))}return m()(e,t),o()(e,[{key:"render",value:function(){return"message"==this.props.mode?b.a.createElement("div",{className:"message-row message-admin"},b.a.createElement("span",{className:"usr-tit op-tit"},this.props.invitation.bubble&&b.a.createElement("i",{title:this.props.invitation.name_support||this.props.invitation.extra_profile,className:"chat-operators mi-fs15 mr-0"},this.props.invitation.photo&&b.a.createElement("img",{src:this.props.invitation.photo,alt:"",className:"profile-msg-pic"}),!this.props.invitation.photo&&b.a.createElement("i",{className:"icon-assistant material-icons mr-0"},"account_box")),!this.props.invitation.bubble&&(this.props.invitation.name_support||this.props.invitation.extra_profile)),b.a.createElement("div",{className:"msg-body",dangerouslySetInnerHTML:{__html:this.props.invitation.message}})):b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{id:"lhc-profile-body"},b.a.createElement("div",{className:"operator-info d-flex border-bottom p-2"},b.a.createElement("div",null,this.props.invitation.photo&&b.a.createElement("img",{width:"48",height:"48",src:this.props.invitation.photo,title:this.props.invitation.photo_title,alt:""}),!this.props.invitation.photo&&b.a.createElement("i",{className:"icon-assistant material-icons mr-0"},"account_box")),b.a.createElement("div",{className:"p-1 pl-2 w-100"},b.a.createElement("div",null,b.a.createElement("strong",null,this.props.invitation.name_support||this.props.invitation.extra_profile,b.a.createElement("br",null)),this.props.invitation.name_support&&b.a.createElement("span",null,b.a.createElement("i",null,this.props.invitation.extra_profile)))))),"profile_only"!=this.props.mode&&b.a.createElement("div",{className:"message-row message-admin pt-1 text-left"},b.a.createElement("div",{className:"msg-body",dangerouslySetInnerHTML:{__html:this.props.invitation.message}})))}}]),e}(w.PureComponent),j=a(5);function P(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function O(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?P(Object(a),!0).forEach((function(e){v()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var T=Object(E.b)((function(t){return{chatwidget:t.chatwidget}}))(i=function(t){function e(t){var a;return n()(this,e),a=p()(this,d()(e).call(this,t)),v()(g()(a),"insertText",(function(t){var e=a.textMessageRef.current.selectionStart;a.setState({Question:a.state.Question.substring(0,e)+t+a.state.Question.substring(e)})})),a.state={showBBCode:null,Question:""},a.handleSubmit=a.handleSubmit.bind(g()(a)),a.enterKeyDown=a.enterKeyDown.bind(g()(a)),a.handleContentChange=a.handleContentChange.bind(g()(a)),a.handleContentChangeCustom=a.handleContentChangeCustom.bind(g()(a)),a.toggleModal=a.toggleModal.bind(g()(a)),a.textMessageRef=b.a.createRef(),a}return m()(e,t),o()(e,[{key:"toggleModal",value:function(){this.setState({showBBCode:!this.state.showBBCode})}},{key:"enterKeyDown",value:function(t){"Enter"!==t.key||t.shiftKey||(this.handleSubmit(t),t.preventDefault())}},{key:"handleSubmit",value:function(t){if(0==this.props.chatwidget.get("processStatus")){var e=this.state;e.jsvar=this.props.chatwidget.get("jsVars"),e["captcha_"+this.props.chatwidget.getIn(["captcha","hash"])]=this.props.chatwidget.getIn(["captcha","ts"]),e.tscaptcha=this.props.chatwidget.getIn(["captcha","ts"]),e.user_timezone=S.a.getTimeZone(),e.URLRefer=window.location.href.substring(window.location.protocol.length),e.r=this.props.chatwidget.get("ses_ref"),""!=this.props.chatwidget.get("bot_id")&&(e.bot_id=this.props.chatwidget.get("bot_id")),""!=this.props.chatwidget.get("operator")&&(e.operator=this.props.chatwidget.get("operator")),null!==this.props.chatwidget.get("pvhash")&&(e.pvhash=this.props.chatwidget.get("pvhash")),null!==this.props.chatwidget.get("priority")&&(e.priority=this.props.chatwidget.get("priority")),null!==this.props.chatwidget.get("phash")&&(e.phash=this.props.chatwidget.get("phash"));var a=S.a.getCustomFieldsSubmit(this.props.chatwidget.getIn(["customData","fields"]));null!==a&&(e=O({},e,{},a));var i={department:this.props.chatwidget.get("department"),theme:this.props.chatwidget.get("theme"),mode:this.props.chatwidget.get("mode"),vid:this.props.chatwidget.get("vid"),fields:e};!0===this.props.chatwidget.hasIn(["proactive","data","invitation_id"])&&(i.invitation_id=this.props.chatwidget.getIn(["proactive","data","invitation_id"])),this.props.dispatch(Object(j.o)(i)),t.preventDefault()}}},{key:"handleContentChange",value:function(t){var e=this,a=this.state;a[t.id]=t.value,this.setState(a),"DepartamentID"==t.id&&this.props.chatwidget.getIn(["onlineData","department","departments"]).size>0&&this.props.chatwidget.getIn(["onlineData","department","departments"]).map((function(a){a.get("value")==t.value&&0==a.get("online")&&(e.props.dispatch({type:"dep_default",data:t.value}),e.props.dispatch({type:"onlineStatus",data:!1}))}))}},{key:"handleContentChangeCustom",value:function(t){this.props.dispatch({type:"CUSTOM_FIELDS_ITEM",data:{id:t.field.get("index"),value:t.value}})}},{key:"componentDidMount",value:function(){S.a.prefillFields(this),this.updateOnlineFields()}},{key:"componentWillUnmount",value:function(){var t=document.getElementById("messagesBlock");null!==t&&this.props.setMessages(t.innerHTML);var e=document.getElementById("lhc-profile-body");null!==e&&this.props.setProfile(e.innerHTML)}},{key:"updateOnlineFields",value:function(){!1===this.props.chatwidget.getIn(["onlineData","fetched"])&&this.props.dispatch(Object(j.i)({department:this.props.chatwidget.get("department"),product:this.props.chatwidget.get("product"),theme:this.props.chatwidget.get("theme"),mode:this.props.chatwidget.get("mode"),pvhash:this.props.chatwidget.get("pvhash"),phash:this.props.chatwidget.get("phash"),online:1}))}},{key:"componentDidUpdate",value:function(t,e,a){this.updateOnlineFields(),document.getElementById("id-container-fluid")&&S.a.sendMessageParent("widgetHeight",[{height:document.getElementById("id-container-fluid").offsetHeight+40}]),!1===t.chatwidget.get("shown")&&!0===this.props.chatwidget.get("shown")&&"widget"==this.props.chatwidget.get("mode")&&this.textMessageRef.current&&this.textMessageRef.current.focus()}},{key:"render",value:function(){var t=this,e=this.props.t;if(!0===this.props.chatwidget.getIn(["onlineData","fetched"])&&!0===this.props.chatwidget.getIn(["onlineData","disabled"]))return b.a.createElement("div",{className:"alert alert-danger m-2",role:"alert"},e("start_chat.cant_start_a_chat"));if(!1===this.props.chatwidget.getIn(["onlineData","fetched"])||!0===this.props.chatwidget.getIn(["chat_ui","auto_start"]))return null;if(!this.props.chatwidget.get("onlineData").has("fields")||this.props.chatwidget.hasIn(["chat_ui","show_messages_box"])&&1==this.props.chatwidget.getIn(["onlineData","fields_visible"])&&0==this.props.chatwidget.getIn(["customData","fields"]).size)a="";else var a=this.props.chatwidget.getIn(["onlineData","fields"]).map((function(e){return b.a.createElement(y.a,{chatUI:t.props.chatwidget.get("chat_ui"),key:e.get("identifier"),isInvalid:t.props.chatwidget.hasIn(["validationErrors",e.get("identifier")]),defaultValueField:t.state[e.get("name")]||e.get("value"),attrPrefill:{attr_prefill_admin:t.props.chatwidget.get("attr_prefill_admin"),attr_prefill:t.props.chatwidget.get("attr_prefill")},onChangeContent:t.handleContentChange,field:e})}));if(this.props.chatwidget.getIn(["customData","fields"]).size>0)var i=this.props.chatwidget.getIn(["customData","fields"]).map((function(e){return b.a.createElement(y.a,{chatUI:t.props.chatwidget.get("chat_ui"),key:e.get("identifier"),isInvalid:t.props.chatwidget.hasIn(["validationErrors",e.get("identifier")]),defaultValueField:e.get("value"),onChangeContent:t.handleContentChangeCustom,field:e})}));else i="";if(this.props.chatwidget.hasIn(["onlineData","paid","error"])&&this.props.chatwidget.getIn(["onlineData","paid","error"]))return b.a.createElement("p",{className:"p-2"},this.props.chatwidget.getIn(["onlineData","paid","message"]));if(0==this.props.chatwidget.get("processStatus")||1==this.props.chatwidget.get("processStatus")){if(this.props.chatwidget.hasIn(["chat_ui","show_messages_box"])&&this.props.chatwidget.getIn(["onlineData","fields_visible"])<=1&&0==this.props.chatwidget.getIn(["customData","fields"]).size){var s="pl-0 no-outline form-control rounded-0 form-control border-left-0 border-right-0 border-0";return 1==this.props.chatwidget.get("processStatus")&&(s+=" d-none "),b.a.createElement(b.a.Fragment,null,this.state.showBBCode&&b.a.createElement(D.a,{showModal:this.state.showBBCode,insertText:this.insertText,toggle:this.toggleModal,dataUrl:"/chat/bbcodeinsert?react=1"}),!0===this.props.chatwidget.getIn(["proactive","has"])&&b.a.createElement(M,{mode:"profile_only",invitation:this.props.chatwidget.getIn(["proactive","data"])})||this.props.chatwidget.hasIn(["chat_ui","operator_profile"])&&b.a.createElement("div",{id:"lhc-profile-body"},b.a.createElement("div",{className:"p-2 border-bottom",dangerouslySetInnerHTML:{__html:this.props.chatwidget.getIn(["chat_ui","operator_profile"])}})),b.a.createElement("div",{className:"flex-grow-1 overflow-scroll position-relative",id:"messagesBlock"},b.a.createElement("div",{className:"bottom-message px-1",id:"messages-scroll"},!0===this.props.chatwidget.getIn(["proactive","has"])&&b.a.createElement(M,{mode:"message",invitation:this.props.chatwidget.getIn(["proactive","data"])}),!this.props.chatwidget.getIn(["proactive","has"])&&this.props.chatwidget.hasIn(["chat_ui","cmmsg_widget"])&&b.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.chatwidget.getIn(["chat_ui","cmmsg_widget"])}}),1==this.props.chatwidget.get("processStatus")&&""!=this.state.Question&&b.a.createElement("div",{"data-op-id":"0",className:"message-row response"},b.a.createElement("div",{className:"msg-date"}),b.a.createElement("span",{title:"",className:"usr-tit vis-tit"},b.a.createElement("i",{title:e("start_chat.visitor"),className:"material-icons chat-operators mi-fs15 mr-0"},"face"),b.a.createElement("span",{className:"user-nick-title"},e("start_chat.visitor"))),b.a.createElement("div",{className:"msg-body"},this.state.Question)))),!this.props.chatwidget.getIn(["proactive","has"])&&this.props.chatwidget.hasIn(["chat_ui","custom_html_widget"])&&b.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.chatwidget.getIn(["chat_ui","custom_html_widget"])}}),b.a.createElement("div",{className:"d-flex flex-row border-top position-relative message-send-area"},this.props.chatwidget.hasIn(["validationErrors","question"])&&b.a.createElement("div",{id:"id-operator-typing",className:"bg-white pl-1"},this.props.chatwidget.getIn(["validationErrors","question"])),1==this.props.chatwidget.getIn(["onlineData","fields_visible"])&&b.a.createElement(b.a.Fragment,null,b.a.createElement(x,{toggleModal:this.toggleModal}),b.a.createElement("div",{className:"mx-auto pb-1 w-100"},1==this.props.chatwidget.get("processStatus")&&b.a.createElement("div",{className:"loader-submit"}),b.a.createElement("textarea",{disabled:1==this.props.chatwidget.get("processStatus"),maxLength:this.props.chatwidget.getIn(["chat_ui","max_length"]),style:{height:!0===this.props.chatwidget.get("shown")&&this.textMessageRef.current&&(/\r|\n/.exec(this.state.Question)||this.state.Question.length>this.textMessageRef.current.offsetWidth/8.6)?"60px":"inherit"},"aria-label":"Type your message here...",id:"CSChatMessage",value:this.state.Question,placeholder:this.props.chatwidget.hasIn(["chat_ui","placeholder_message"])?this.props.chatwidget.getIn(["chat_ui","placeholder_message"]):e("chat.type_here"),onKeyDown:this.enterKeyDown,onChange:function(e){return t.handleContentChange({id:"Question",value:e.target.value})},ref:this.textMessageRef,rows:"1",className:s})),b.a.createElement("div",{className:"disable-select"},b.a.createElement("div",{className:"user-chatwidget-buttons pt-1",id:"ChatSendButtonContainer"},b.a.createElement("a",{onClick:this.handleSubmit,title:e("button.start_chat")},b.a.createElement("i",{className:"material-icons text-muted settings"},"send"))))),0==this.props.chatwidget.getIn(["onlineData","fields_visible"])&&b.a.createElement("button",{className:"mx-auto pb-1 w-100 btn btn-light rounded-0",onClick:this.handleSubmit,title:e("button.start_chat")},this.props.chatwidget.getIn(["chat_ui","custom_start_button"])||e("button.start_chat_With_us"))))}return b.a.createElement("div",{id:"id-container-fluid"},!0===this.props.chatwidget.getIn(["proactive","has"])&&b.a.createElement(M,{mode:"profile",invitation:this.props.chatwidget.getIn(["proactive","data"])})||this.props.chatwidget.hasIn(["chat_ui","operator_profile"])&&b.a.createElement("div",{className:"p-2 border-bottom",dangerouslySetInnerHTML:{__html:this.props.chatwidget.getIn(["chat_ui","operator_profile"])}}),b.a.createElement("div",{className:"container-fluid"},b.a.createElement(N,{errors:this.props.chatwidget.get("validationErrors")}),!this.props.chatwidget.getIn(["proactive","has"])&&this.props.chatwidget.hasIn(["chat_ui","custom_html_widget"])&&b.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.chatwidget.getIn(["chat_ui","custom_html_widget"])}}),b.a.createElement("form",{onSubmit:this.handleSubmit},b.a.createElement("div",{className:"row pt-2"},a,i,this.props.chatwidget.hasIn(["onlineData","department"])&&b.a.createElement(k.a,{defaultValueField:this.state.DepartamentID,setDefaultValue:this.props.chatwidget.get("departmentDefault"),onChangeContent:this.handleContentChange,isInvalidProduct:this.props.chatwidget.hasIn(["validationErrors","ProductID"]),isInvalid:this.props.chatwidget.hasIn(["validationErrors","department"]),departments:this.props.chatwidget.getIn(["onlineData","department"])})),b.a.createElement("div",{className:"row"},b.a.createElement("div",{className:"col-12 pb-3"},b.a.createElement("button",{disabled:1==this.props.chatwidget.get("processStatus"),type:"submit",className:"btn btn-secondary btn-sm"},this.props.chatwidget.getIn(["chat_ui","custom_start_button"])||e("button.start_chat")))))))}return 2==this.props.chatwidget.get("processStatus")?b.a.createElement("div",{className:"container-fluid",id:"id-container-fluid"},b.a.createElement("div",{className:"row"},b.a.createElement("div",{className:"col-12"},b.a.createElement("p",null,e("start_chat.thank_you_for_feedback"))))):void 0}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.chatwidget.getIn(["chat_ui","auto_start"])&&0==t.chatwidget.get("processStatus")&&("embed"==t.chatwidget.get("mode")||"popup"==t.chatwidget.get("mode")||"widget"==t.chatwidget.get("mode")&&1==t.chatwidget.get("shown"))){var a={jsvar:t.chatwidget.get("jsVars")};a["captcha_"+t.chatwidget.getIn(["captcha","hash"])]=t.chatwidget.getIn(["captcha","ts"]),a.tscaptcha=t.chatwidget.getIn(["captcha","ts"]),a.user_timezone=S.a.getTimeZone(),a.URLRefer=window.location.href.substring(window.location.protocol.length),a.r=t.chatwidget.get("ses_ref"),""!=t.chatwidget.get("bot_id")&&(a.bot_id=t.chatwidget.get("bot_id")),""!=t.chatwidget.get("operator")&&(a.operator=t.chatwidget.get("operator")),null!==t.chatwidget.get("priority")&&(a.priority=t.chatwidget.get("priority")),null!==t.chatwidget.get("pvhash")&&(a.pvhash=t.chatwidget.get("pvhash")),null!==t.chatwidget.get("phash")&&(a.phash=t.chatwidget.get("phash"));var i=S.a.getCustomFieldsSubmit(t.chatwidget.getIn(["customData","fields"]));null!==i&&(a=O({},a,{},i)),t.dispatch(Object(j.o)({department:t.chatwidget.get("department"),theme:t.chatwidget.get("theme"),mode:t.chatwidget.get("mode"),vid:t.chatwidget.get("vid"),fields:a}))}return null}}]),e}(w.Component))||i;e.default=Object(_.b)()(T)},80:function(t,e,a){"use strict";var i=a(78),s=a.n(i),n=a(6),r=a.n(n),o=a(7),l=a.n(o),p=a(10),c=a.n(p),d=a(11),h=a.n(d),g=a(3),u=a.n(g),m=a(12),f=a.n(m),v=a(4),w=a.n(v),b=a(0),E=a.n(b),_=a(2),y=a.n(_),I=a(77),C=a.n(I),N=a(18),k=a(86),D=a.n(k),x=function(t){function e(t){var a;return r()(this,e),a=c()(this,h()(e).call(this,t)),w()(u()(a),"state",{body:null}),w()(u()(a),"dismissModal",(function(){a.props.toggle()})),w()(u()(a),"generalOnClick",(function(t){var e=a.props.t,i=t["data-bb-code"];if(t["data-promt"]&&"img"==t["data-promt"])(s=prompt(e("bbcode.img_link")))&&(i="["+i+"]"+s+"[/"+i+"]");else if(t["data-promt"]&&"url"==t["data-promt"]){var s;(s=prompt(e("bbcode.link")))&&(i="[url="+s+"]"+e("bbcode.link_here")+"[/url]")}a.props.insertText(i)})),w()(u()(a),"generalDataActionClick",(function(t){t["data-action"]&&a.props[t["data-action"]]&&a.props[t["data-action"]]()})),a}return f()(e,t),l()(e,[{key:"componentDidMount",value:function(){var t=this;y.a.get(window.lhcChat.base_url+this.props.dataUrl).then((function(e){t.setState({body:e.data});var i=document.getElementById("dialog-content"),s=a(39),n=i.querySelectorAll('[data-toggle="tab"]');if(n.length>0){var r=0;Array.prototype.forEach.call(n,(function(t){new s.Tab(t)}));var o=new D.a(".tab-content");o.onSwipeLeft((function(){r=r<n.length-1?r+1:0,n[r].Tab.show()})),o.onSwipeRight((function(){r=r>0?r-1:n.length-1,n[r].Tab.show()}))}})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){var t=this;return E.a.createElement(E.a.Fragment,null,null!==this.state.body&&E.a.createElement("div",{className:"fade modal-backdrop show"}),null!==this.state.body&&E.a.createElement("div",{role:"dialog",id:"dialog-content","aria-modal":"true",className:"fade modal show d-block",tabIndex:"-1"},C()(this.state.body,{replace:function(e){if(e.attribs&&"react-close-modal"===e.attribs.id)return E.a.createElement("button",{type:"button",className:"close float-right","data-dismiss":"modal",onClick:t.dismissModal,"aria-label":"Close"},E.a.createElement("span",{"aria-hidden":"true"},"Ã—"));if(e.attribs&&e.attribs.bbitem)return e.attribs.class&&(e.attribs.className=e.attribs.class,delete e.attribs.class),E.a.createElement("a",s()({},e.attribs,{onClick:function(a){return t.generalOnClick(e.attribs)}}),Object(I.domToReact)(e.children));if(e.type&&"tag"===e.type&&e.name&&"input"==e.name&&e.attribs&&e.attribs.type&&"button"==e.attribs.type)return e.attribs.class&&(e.attribs.className=e.attribs.class,delete e.attribs.class),E.a.createElement("input",s()({},e.attribs,{onClick:function(a){return t.generalDataActionClick(e.attribs)}}));if(e.type&&"script"===e.type){if(e.children.length>0)setTimeout((function(){var t=document.createElement("script");t.appendChild(document.createTextNode(e.children[0].data)),document.getElementsByTagName("head").item(0).appendChild(t)}),500);else if(e.attribs&&e.attribs.src){var a=document.createElement("script");a.src=e.attribs.src,a.type="text/javascript",document.getElementsByTagName("head").item(0).appendChild(a)}return E.a.createElement(E.a.Fragment,null)}}})))}}]),e}(b.PureComponent);e.a=Object(N.b)()(x)},82:function(t,e,a){"use strict";var i=a(6),s=a.n(i),n=a(7),r=a.n(n),o=a(10),l=a.n(o),p=a(11),c=a.n(p),d=a(3),h=a.n(d),g=a(12),u=a.n(g),m=a(4),f=a.n(m),v=a(0),w=a.n(v),b=function(t){function e(t){var a;return s()(this,e),a=l()(this,c()(e).call(this,t)),f()(h()(a),"state",{hiddenIfPrefilled:!1}),a.onchangeAttr=a.onchangeAttr.bind(h()(a)),a}return u()(e,t),r()(e,[{key:"onchangeAttr",value:function(t){this.props.onChangeContent({id:this.props.field.get("name"),value:t.value,field:this.props.field})}},{key:"componentDidMount",value:function(){var t=this;"checkbox"==this.props.field.get("type")&&1==this.props.field.get("default")?this.props.onChangeContent({id:this.props.field.get("name"),value:!0}):"dropdown"==this.props.field.get("type")&&this.props.onChangeContent({id:this.props.field.get("name"),value:this.props.defaultValueField}),this.props.attrPrefill&&this.props.attrPrefill.attr_prefill_admin&&this.props.attrPrefill.attr_prefill_admin.forEach((function(e){(e.index==t.props.field.get("identifier")||t.props.field.has("identifier_prefill")&&e.index==t.props.field.get("identifier_prefill"))&&(t.props.onChangeContent({id:t.props.field.get("name"),value:e.value}),t.props.field.has("hide_prefilled")&&1==t.props.field.get("hide_prefilled")&&!1===t.props.isInvalid&&t.setState({hiddenIfPrefilled:!0}))}))}},{key:"render",value:function(){var t=this;if(!0===this.state.hiddenIfPrefilled&&!0!==this.props.isInvalid)return null;var e="col-"+this.props.field.get("width"),a=!0===this.props.field.get("required"),i=[];if(""!=this.props.field.get("class")&&i.push(this.props.field.get("class")),!0===this.props.isInvalid&&i.push("is-invalid"),"text"==this.props.field.get("type"))return w.a.createElement("div",{className:e},w.a.createElement("div",{className:"form-group"},w.a.createElement("label",{className:"control-label"},this.props.field.get("label"),!0===a?"*":""),w.a.createElement("input",{type:"text",className:i.join(" "),required:a,onChange:function(e){return t.onchangeAttr({value:e.target.value})},name:this.props.field.get("name"),defaultValue:this.props.defaultValueField,placeholder:this.props.field.get("placeholder")})));if("password"==this.props.field.get("type"))return w.a.createElement("div",{className:e},w.a.createElement("div",{className:"form-group"},w.a.createElement("label",{className:"control-label"},this.props.field.get("label"),!0===a?"*":""),w.a.createElement("input",{type:"password",autocomplete:"new-password",className:i.join(" "),required:a,onChange:function(e){return t.onchangeAttr({value:e.target.value})},name:this.props.field.get("name"),defaultValue:this.props.defaultValueField,placeholder:this.props.field.get("placeholder")})));if("textarea"==this.props.field.get("type"))return w.a.createElement("div",{className:e},w.a.createElement("div",{className:"form-group"},!this.props.chatUI.has("hide_message_label")&&"question"==this.props.field.get("identifier")&&w.a.createElement("label",{className:"control-label"},this.props.field.get("label"),!0===a?"*":""),w.a.createElement("textarea",{className:i.join(" "),required:a,onChange:function(e){return t.onchangeAttr({value:e.target.value})},name:this.props.field.get("name"),defaultValue:this.props.defaultValueField,placeholder:this.props.field.get("placeholder")})));if("file"==this.props.field.get("type"))return w.a.createElement("div",{className:e},w.a.createElement("div",{className:"form-group"},w.a.createElement("label",{className:"control-label"},this.props.field.get("label"),!0===a?"*":""),w.a.createElement("input",{type:"file",className:this.props.field.get("class"),required:a,name:this.props.field.get("name")})));if("checkbox"==this.props.field.get("type"))return w.a.createElement("div",{className:e},w.a.createElement("div",{className:"form-group"},w.a.createElement("div",{className:"form-check"},w.a.createElement("input",{className:i.join(" "),defaultChecked:this.props.field.get("default"),type:"checkbox",value:"on",onChange:function(e){return t.onchangeAttr({value:e.target.checked})},required:a,name:this.props.field.get("name")}),w.a.createElement("label",{className:"form-check-label form-control-sm",dangerouslySetInnerHTML:{__html:this.props.field.get("label")}}))));if("hidden"==this.props.field.get("type"))return w.a.createElement("input",{type:"hidden",className:i.join(" "),required:a,onChange:function(e){return t.onchangeAttr({value:e.target.value})},name:this.props.field.get("name"),defaultValue:this.props.defaultValueField,placeholder:this.props.field.get("placeholder")});if("dropdown"==this.props.field.get("type")){var s=this.props.field.get("options").map((function(t){return w.a.createElement("option",{key:"opt-drop-"+t.get("value"),value:t.get("value")},t.get("name"))}));return w.a.createElement("div",{className:e},w.a.createElement("div",{className:"form-group"},w.a.createElement("label",{className:"control-label"},this.props.field.get("label"),!0===a?"*":""),w.a.createElement("select",{className:i.join(" "),required:a,onChange:function(e){return t.onchangeAttr({value:e.target.value})},name:this.props.field.get("name"),defaultValue:this.props.defaultValueField},s)))}return console.log("Unknown field"),null}}]),e}(v.Component);e.a=b},83:function(t,e,a){"use strict";var i=a(6),s=a.n(i),n=a(7),r=a.n(n),o=a(10),l=a.n(o),p=a(11),c=a.n(p),d=a(3),h=a.n(d),g=a(12),u=a.n(g),m=a(0),f=a.n(m),v=a(18),w=a(5),b=a(13),E=function(t){function e(t){var a;return s()(this,e),(a=l()(this,c()(e).call(this,t))).onchangeAttr=a.onchangeAttr.bind(h()(a)),a.onchangeAttrProduct=a.onchangeAttrProduct.bind(h()(a)),a}return u()(e,t),r()(e,[{key:"onchangeAttr",value:function(t){this.props.onChangeContent({id:"DepartamentID",value:t.value}),!0===this.props.departments.getIn(["settings","product_by_department"])&&this.props.dispatch(Object(w.e)({dep_id:t.value}))}},{key:"onchangeAttrProduct",value:function(t){this.props.onChangeContent({id:"ProductID",value:t.value})}},{key:"componentDidMount",value:function(){!0!==this.props.departments.getIn(["settings","product"])||!0!==this.props.departments.getIn(["settings","product_by_department"])&&!this.props.departments.has("products")||this.props.onChangeContent({id:"HasProductID",value:!0}),0!=this.props.departments.get("departments").size&&(1!=this.props.departments.get("departments").size&&this.props.departments.hasIn(["settings","optional"])?this.props.departments.get("departments").size>1&&this.onchangeAttr({value:-1}):this.onchangeAttr({value:this.props.setDefaultValue||this.props.departments.getIn(["departments",0]).get("value")}))}},{key:"render",value:function(){var t=this,e=this.props.t,a=null;if(this.props.departments.get("departments").size>1&&!this.props.departments.hasIn(["settings","hide_department"])){var i=["form-control","form-control-sm"];!0===this.props.isInvalid&&i.push("is-invalid");var s=this.props.departments.get("departments").map((function(t){return f.a.createElement("option",{key:"dep-"+t.get("value"),value:t.get("value")},t.get("name")," ",t.get("online")?"":e("department.offline"))}));a=f.a.createElement("div",{className:"form-group"},f.a.createElement("label",{className:"control-label"},this.props.departments.getIn(["settings","label"]),"*"),f.a.createElement("select",{defaultValue:this.props.setDefaultValue||this.props.defaultValueField,className:i.join(" "),onChange:function(e){return t.onchangeAttr({value:e.target.value})}},this.props.departments.hasIn(["settings","optional"])&&f.a.createElement("option",{value:"-1"},this.props.departments.getIn(["settings","optional"])),s))}var n=null;if(!0===this.props.departments.getIn(["settings","product"])){var r=["form-control","form-control-sm"];!0===this.props.isInvalidProduct&&r.push("is-invalid");var o=this.props.departments.has("products")?this.props.departments.get("products").map((function(t){return f.a.createElement("option",{key:"product-"+t.get("value"),value:t.get("value")},t.get("name"))})):"";this.props.departments.has("products")&&this.props.departments.get("products").size>0&&(n=f.a.createElement("div",{className:"form-group"},f.a.createElement("label",{className:"control-label"},e("department.product"),!0===this.props.departments.getIn(["settings","product_required"])?"*":""),f.a.createElement("select",{className:r.join(" "),onChange:function(e){return t.onchangeAttrProduct({value:e.target.value})}},f.a.createElement("option",{value:""},e("department.choose_a_product")),o)))}return null!==n||null!==a?f.a.createElement("div",{className:"col-12"},a,n):null}}]),e}(m.Component);e.a=Object(b.b)()(Object(v.b)()(E))}}]);