(self.webpackChunkLHCReactAPP=self.webpackChunkLHCReactAPP||[]).push([[354],{22858:function(e){e.exports=function(e){if(Array.isArray(e))return e}},13884:function(e){e.exports=function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var a=[],i=!0,n=!1,s=void 0;try{for(var r,o=e[Symbol.iterator]();!(i=(r=o.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){n=!0,s=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw s}}return a}}},80521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},63038:function(e,t,a){var i=a(22858),n=a(13884),s=a(80521);e.exports=function(e,t){return i(e)||n(e,t)||s()}},97226:function(e,t,a){"use strict";a(12419);var i=a(34575),n=a.n(i),s=a(93913),r=a.n(s),o=a(2205),l=a.n(o),c=a(78585),p=a.n(c),d=a(29754),h=a.n(d),u=a(67294);var _=function(e){l()(s,e);var t,a,i=(t=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=h()(t);if(a){var n=h()(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return p()(this,e)});function s(e){return n()(this,s),i.call(this,e)}return r()(s,[{key:"render",value:function(){return u.createElement(u.Fragment,null,u.createElement("div",{className:"fade modal-backdrop show"}),u.createElement("div",{role:"dialog",id:"dialog-content","aria-modal":"true",className:"fade modal show d-block p-2",tabIndex:"-1"},u.createElement("div",{className:"modal-content p-2"},u.createElement("p",null,this.props.text),u.createElement("div",{className:"modal-footer"},u.createElement("button",{className:"btn btn-secondary btn-sm",onClick:this.props.close,type:"button"},this.props.closeText)))))}}]),s}(u.PureComponent);t.Z=_},9931:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12419),core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_reflect_construct_js__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(67154),_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(34575),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(93913),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(81506),_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2205),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(78585),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(29754),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_function_bind_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(24812),core_js_modules_es_function_bind_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_function_bind_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(82772),core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(19601),core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_object_assign_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(68309),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_11__),react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(67294),html_react_parser__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(30488),html_react_parser__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(html_react_parser__WEBPACK_IMPORTED_MODULE_13__),react_redux__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(46458);function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var a,i=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(e);if(t){var n=_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7___default()(this).constructor;a=Reflect.construct(i,arguments,n)}else a=i.apply(this,arguments);return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6___default()(this,a)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var ChatBotIntroMessage=function(_PureComponent){_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(ChatBotIntroMessage,_PureComponent);var _super=_createSuper(ChatBotIntroMessage);function ChatBotIntroMessage(e){var t;return _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this,ChatBotIntroMessage),(t=_super.call(this,e)).abstractClick=t.abstractClick.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(t)),t.updateTriggerClicked=t.updateTriggerClicked.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(t)),t.processBotAction=t.processBotAction.bind(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(t)),t.disableEditor=!1,t}return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(ChatBotIntroMessage,[{key:"addLoader",value:function(e,t){e["data-no-change"]||"button"!=e.type||(t.setAttribute("disabled","disabled"),t.innerHTML='<i class="material-icons">&#xf113;</i>'+t.innerHTML)}},{key:"abstractClick",value:function(e,t){var a=this.props.t;if(this.addLoader(e,t.target),-1!==e.onclick.indexOf("lhinst.updateTriggerClicked"))this.updateTriggerClicked({type:"triggerclicked"},e,t.target);else if(-1!==e.onclick.indexOf("notificationsLHC.sendNotification"));else if(-1!==e.onclick.indexOf("lhinst.buttonClicked"))this.updateTriggerClicked({type:""},e,t.target);else if(-1!==e.onclick.indexOf("lhinst.updateChatClicked"))this.updateTriggerClicked({type:"",mainType:"updatebuttonclicked"},e,t.target);else if(-1!==e.onclick.indexOf("lhinst.editGenericStep"))this.updateTriggerClicked({type:"editgenericstep"},e,t.target);else if(-1!==e.onclick.indexOf("lhinst.dropdownClicked")){var i=document.getElementById("id_generic_list-"+e["data-id"]);i&&"0"!=i.value&&""!=i.value?(e["data-payload"]=i.value,this.updateTriggerClicked({type:"valueclicked"},e,t.target)):alert(a("bot.please_choose"))}else helperFunctions.emitEvent("MessageClick",[e,this.props.dispatch]),console.log("Unknown click event: "+e.onclick);t.preventDefault()}},{key:"updateTriggerClicked",value:function(e,t,a){this.props.setBotPayload({type:e.type,payload:t["data-payload"],id:t["data-id"],processed:void 0===t["data-keep"]})}},{key:"processBotAction",value:function processBotAction(domNode){var attr=domNode.attribs;"lhinst.disableVisitorEditor"==attr["data-bot-action"]?this.disableEditor=!0:"lhinst.setDelay"==attr["data-bot-action"]||"execute-js"==attr["data-bot-action"]&&eval(domNode.children[0].data)}},{key:"render",value:function(){var e=this;return html_react_parser__WEBPACK_IMPORTED_MODULE_13___default()(this.props.content,{replace:function(t){if(t.attribs){var a=Object.assign({},t.attribs);if(t.attribs.onclick&&delete t.attribs.onclick,t.name&&"button"===t.name){if(a.onclick)return react__WEBPACK_IMPORTED_MODULE_12__.createElement("button",_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_1___default()({},t.attribs,{onClick:function(t){return e.abstractClick(a,t)}}),(0,html_react_parser__WEBPACK_IMPORTED_MODULE_13__.domToReact)(t.children))}else if(t.name&&"a"===t.name){if(a.onclick)return react__WEBPACK_IMPORTED_MODULE_12__.createElement("a",_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_1___default()({},t.attribs,{onClick:function(t){return e.abstractClick(a,t)}}),(0,html_react_parser__WEBPACK_IMPORTED_MODULE_13__.domToReact)(t.children))}else t.name&&"script"===t.name&&t.attribs["data-bot-action"]&&e.processBotAction(t)}}})}}]),ChatBotIntroMessage}(react__WEBPACK_IMPORTED_MODULE_12__.PureComponent);__webpack_exports__.Z=ChatBotIntroMessage},32125:function(e,t,a){"use strict";a(12419);var i=a(34575),n=a.n(i),s=a(93913),r=a.n(s),o=a(81506),l=a.n(o),c=a(2205),p=a.n(c),d=a(78585),h=a.n(d),u=a(29754),_=a.n(u),g=(a(24812),a(21249),a(69600),a(67294)),m=a(7139),f=a(44134),v=a(46458);var b=function(e){p()(s,e);var t,a,i=(t=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=_()(t);if(a){var n=_()(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return h()(this,e)});function s(e){var t;return n()(this,s),(t=i.call(this,e)).onchangeAttr=t.onchangeAttr.bind(l()(t)),t.onchangeAttrProduct=t.onchangeAttrProduct.bind(l()(t)),t}return r()(s,[{key:"onchangeAttr",value:function(e){this.props.onChangeContent({id:"DepartamentID",value:e.value}),!0===this.props.departments.getIn(["settings","product_by_department"])&&this.props.dispatch((0,f.Xp)({dep_id:e.value}))}},{key:"onchangeAttrProduct",value:function(e){this.props.onChangeContent({id:"ProductID",value:e.value})}},{key:"componentDidMount",value:function(){!0!==this.props.departments.getIn(["settings","product"])||!0!==this.props.departments.getIn(["settings","product_by_department"])&&!this.props.departments.has("products")||this.props.onChangeContent({id:"HasProductID",value:!0}),0!=this.props.departments.get("departments").size&&(1!=this.props.departments.get("departments").size&&this.props.departments.hasIn(["settings","optional"])?this.props.departments.get("departments").size>1&&this.onchangeAttr({value:-1}):this.onchangeAttr({value:this.props.setDefaultValue||this.props.departments.getIn(["departments",0]).get("value")}))}},{key:"render",value:function(){var e=this,t=this.props.t,a=null;if(this.props.departments.get("departments").size>1&&!this.props.departments.hasIn(["settings","hide_department"])){var i=["form-control","form-control-sm"];!0===this.props.isInvalid&&i.push("is-invalid");var n=this.props.departments.get("departments").map((function(e){return g.createElement("option",{key:"dep-"+e.get("value"),value:e.get("value")},e.get("name")," ",e.get("online")?"":t("department.offline"))}));a=g.createElement("div",{className:"form-group"},g.createElement("label",{className:"control-label"},this.props.departments.getIn(["settings","label"]),"*"),g.createElement("select",{id:"id-department-field",defaultValue:this.props.setDefaultValue||this.props.defaultValueField,className:i.join(" "),onChange:function(t){return e.onchangeAttr({value:t.target.value})}},this.props.departments.hasIn(["settings","optional"])&&g.createElement("option",{value:"-1"},this.props.departments.getIn(["settings","optional"])),n))}var s=null;if(!0===this.props.departments.getIn(["settings","product"])){var r=["form-control","form-control-sm"];!0===this.props.isInvalidProduct&&r.push("is-invalid");var o=this.props.departments.has("products")?this.props.departments.get("products").map((function(e){return g.createElement("option",{key:"product-"+e.get("value"),value:e.get("value")},e.get("name"))})):"";this.props.departments.has("products")&&this.props.departments.get("products").size>0&&(s=g.createElement("div",{className:"form-group"},g.createElement("label",{className:"control-label"},t("department.product"),!0===this.props.departments.getIn(["settings","product_required"])?"*":""),g.createElement("select",{className:r.join(" "),onChange:function(t){return e.onchangeAttrProduct({value:t.target.value})}},g.createElement("option",{value:""},t("department.choose_a_product")),o)))}return null!==s||null!==a?g.createElement("div",{className:"col-12"},a,s):null}}]),s}(g.Component);t.Z=(0,v.$j)()((0,m.Z)()(b))},30578:function(e,t,a){"use strict";a(12419);var i=a(34575),n=a.n(i),s=a(93913),r=a.n(s),o=a(81506),l=a.n(o),c=a(2205),p=a.n(c),d=a(78585),h=a.n(d),u=a(29754),_=a.n(u),g=a(59713),m=a.n(g),f=(a(24812),a(24603),a(74916),a(39714),a(89554),a(68309),a(69600),a(54747),a(21249),a(67294)),v=a(7139);var b=function(e){p()(s,e);var t,a,i=(t=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=_()(t);if(a){var n=_()(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return h()(this,e)});function s(e){var t;return n()(this,s),t=i.call(this,e),m()(l()(t),"state",{hiddenIfPrefilled:!1}),t.onchangeAttr=t.onchangeAttr.bind(l()(t)),t.onFileAdded=t.onFileAdded.bind(l()(t)),t}return r()(s,[{key:"onchangeAttr",value:function(e){this.props.onChangeContent({id:this.props.field.get("name"),value:e.value,field:this.props.field})}},{key:"onFileAdded",value:function(e){for(var t=this,a=e.target.files,i=[],n=0;n<a.length;n++)i.push(a.item(n));if(0==a.length)return null;var s=new RegExp("(.|/)("+this.props.field.get("ft_us")+")$","i"),r=this.props.t,o=[];i.forEach((function(e){s.test(e.type)||s.test(e.name)||o.push(e.name+": "+r("file.incorrect_type")),e.size>t.props.field.get("fs")&&o.push(e.name+": "+r("file.to_big_file"))})),o.length>0?alert(o.join("\n")):this.props.onChangeContent({id:this.props.field.get("name"),value:i[0],field:this.props.field})}},{key:"componentDidMount",value:function(){var e=this;"checkbox"==this.props.field.get("type")&&1==this.props.field.get("default")?this.props.onChangeContent({id:this.props.field.get("name"),value:!0}):"dropdown"==this.props.field.get("type")&&this.props.onChangeContent({id:this.props.field.get("name"),value:this.props.defaultValueField}),this.props.attrPrefill&&this.props.attrPrefill.attr_prefill_admin&&this.props.attrPrefill.attr_prefill_admin.forEach((function(t){(t.index==e.props.field.get("identifier")||e.props.field.has("identifier_prefill")&&t.index==e.props.field.get("identifier_prefill"))&&(e.props.onChangeContent({id:e.props.field.get("name"),value:t.value}),e.props.field.has("hide_prefilled")&&1==e.props.field.get("hide_prefilled")&&!1===e.props.isInvalid&&e.setState({hiddenIfPrefilled:!0}))}))}},{key:"render",value:function(){var e=this;if(!0===this.state.hiddenIfPrefilled&&!0!==this.props.isInvalid)return null;var t="col-"+this.props.field.get("width"),a=!0===this.props.field.get("required"),i=[];if(""!=this.props.field.get("class")&&i.push(this.props.field.get("class")),!0===this.props.isInvalid&&i.push("is-invalid"),"text"==this.props.field.get("type"))return f.createElement("div",{className:t},f.createElement("div",{className:"form-group"},f.createElement("label",{className:"control-label"},this.props.field.get("label"),!0===a?"*":""),f.createElement("input",{type:"text",className:i.join(" "),required:a,onChange:function(t){return e.onchangeAttr({value:t.target.value})},name:this.props.field.get("name"),defaultValue:this.props.defaultValueField,placeholder:this.props.field.get("placeholder")})));if("password"==this.props.field.get("type"))return f.createElement("div",{className:t},f.createElement("div",{className:"form-group"},f.createElement("label",{className:"control-label"},this.props.field.get("label"),!0===a?"*":""),f.createElement("input",{type:"password",autocomplete:"new-password",className:i.join(" "),required:a,onChange:function(t){return e.onchangeAttr({value:t.target.value})},name:this.props.field.get("name"),defaultValue:this.props.defaultValueField,placeholder:this.props.field.get("placeholder")})));if("textarea"==this.props.field.get("type"))return f.createElement("div",{className:t},f.createElement("div",{className:"form-group"},!this.props.chatUI.has("hide_message_label")&&"question"==this.props.field.get("identifier")&&f.createElement("label",{className:"control-label"},this.props.field.get("label"),!0===a?"*":""),f.createElement("textarea",{className:i.join(" "),required:a,onChange:function(t){return e.onchangeAttr({value:t.target.value})},name:this.props.field.get("name"),defaultValue:this.props.defaultValueField,placeholder:this.props.field.get("placeholder")})));if("file"==this.props.field.get("type"))return f.createElement("div",{className:t},f.createElement("div",{className:"form-group overflow-hidden"},f.createElement("label",{className:"control-label"},this.props.field.get("label"),!0===a?"*":""),f.createElement("input",{type:"file",onChange:function(t){return e.onFileAdded(t)},className:this.props.field.get("class"),required:a,name:this.props.field.get("name")})));if("checkbox"==this.props.field.get("type"))return f.createElement("div",{className:t},f.createElement("div",{className:"form-group"},f.createElement("div",{className:"form-check"},f.createElement("input",{className:i.join(" "),id:"check-for-"+this.props.field.get("name"),defaultChecked:this.props.field.get("default"),type:"checkbox",value:"on",onChange:function(t){return e.onchangeAttr({value:t.target.checked})},required:a,name:this.props.field.get("name")}),f.createElement("label",{className:"form-check-label",for:"check-for-"+this.props.field.get("name"),dangerouslySetInnerHTML:{__html:this.props.field.get("label")}}))));if("hidden"==this.props.field.get("type"))return f.createElement("input",{type:"hidden",className:i.join(" "),required:a,onChange:function(t){return e.onchangeAttr({value:t.target.value})},name:this.props.field.get("name"),defaultValue:this.props.defaultValueField,placeholder:this.props.field.get("placeholder")});if("dropdown"==this.props.field.get("type")){var n=this.props.field.get("options").map((function(t){return f.createElement("option",{key:"opt-drop-"+t.get("value"),selected:e.props.defaultValueField==t.get("value"),value:t.get("value")},t.get("name"))}));return f.createElement("div",{className:t},f.createElement("div",{className:"form-group"},f.createElement("label",{className:"control-label"},this.props.field.get("label"),!0===a?"*":""),f.createElement("select",{className:i.join(" "),required:a,onChange:function(t){return e.onchangeAttr({value:t.target.value})},name:this.props.field.get("name"),defaultValue:this.props.defaultValueField},n)))}return console.log("Unknown field"),null}}]),s}(f.Component);t.Z=(0,v.Z)()(b)},66936:function(e,t,a){"use strict";a(12419);var i=a(67154),n=a.n(i),s=a(34575),r=a.n(s),o=a(93913),l=a.n(o),c=a(81506),p=a.n(c),d=a(2205),h=a.n(d),u=a(78585),_=a.n(u),g=a(29754),m=a.n(g),f=a(59713),v=a.n(f),b=(a(89554),a(68309),a(32564),a(67294)),E=a(9669),w=a.n(E),y=a(30488),I=a.n(y),C=a(7139),D=a(40298),P=a.n(D);var O=function(e){h()(o,e);var t,i,s=(t=o,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=m()(t);if(i){var n=m()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return _()(this,e)});function o(e){var t;return r()(this,o),t=s.call(this,e),v()(p()(t),"state",{body:null}),v()(p()(t),"dismissModal",(function(){t.props.toggle()})),v()(p()(t),"generalOnClick",(function(e){var a=t.props.t,i=e["data-bb-code"];if(e["data-promt"]&&"img"==e["data-promt"])(n=prompt(a("bbcode.img_link")))&&(i="["+i+"]"+n+"[/"+i+"]");else if(e["data-promt"]&&"url"==e["data-promt"]){var n;(n=prompt(a("bbcode.link")))&&(i="[url="+n+"]"+a("bbcode.link_here")+"[/url]")}t.props.insertText(i),t.props.toggle()})),v()(p()(t),"generalDataActionClick",(function(e){e["data-action"]&&t.props[e["data-action"]]&&t.props[e["data-action"]]()})),t}return l()(o,[{key:"componentDidMount",value:function(){var e=this;w().get(window.lhcChat.base_url+this.props.dataUrl).then((function(t){e.setState({body:t.data});var i=document.getElementById("dialog-content"),n=a(39539),s=i.querySelectorAll('[data-toggle="tab"]');if(s.length>0){var r=0;Array.prototype.forEach.call(s,(function(e){new n.Tab(e)}));var o=new(P())(".tab-content");o.onSwipeLeft((function(){r=r<s.length-1?r+1:0,s[r].Tab.show()})),o.onSwipeRight((function(){r=r>0?r-1:s.length-1,s[r].Tab.show()}))}})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return b.createElement(b.Fragment,null,null!==this.state.body&&b.createElement("div",{className:"fade modal-backdrop show"}),null!==this.state.body&&b.createElement("div",{role:"dialog",id:"dialog-content","aria-modal":"true",className:"fade modal show d-block",tabIndex:"-1"},I()(this.state.body,{replace:function(t){if(t.attribs&&"react-close-modal"===t.attribs.id)return b.createElement("button",{type:"button",className:"close float-right","data-dismiss":"modal",onClick:e.dismissModal,"aria-label":"Close"},b.createElement("span",{"aria-hidden":"true"},"×"));if(t.attribs&&t.attribs.bbitem)return t.attribs.class&&(t.attribs.className=t.attribs.class,delete t.attribs.class),b.createElement("a",n()({},t.attribs,{onClick:function(a){return e.generalOnClick(t.attribs)}}),(0,y.domToReact)(t.children));if(t.type&&"tag"===t.type&&t.name&&"input"==t.name&&t.attribs&&t.attribs.type&&"button"==t.attribs.type)return t.attribs.class&&(t.attribs.className=t.attribs.class,delete t.attribs.class),b.createElement("input",n()({},t.attribs,{onClick:function(a){return e.generalDataActionClick(t.attribs)}}));if(t.type&&"script"===t.type){if(t.children.length>0)setTimeout((function(){var e=document.createElement("script");e.appendChild(document.createTextNode(t.children[0].data)),document.getElementsByTagName("head").item(0).appendChild(e)}),500);else if(t.attribs&&t.attribs.src){var a=document.createElement("script");a.src=t.attribs.src,a.type="text/javascript",document.getElementsByTagName("head").item(0).appendChild(a)}return b.createElement(b.Fragment,null)}}})))}}]),o}(b.PureComponent);t.Z=(0,C.Z)()(O)},29354:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}}),a(12419),a(47941),a(82526),a(57327),a(38880),a(89554),a(54747),a(49337),a(33321),a(69070);var i=a(34575),n=a.n(i),s=a(93913),r=a.n(s),o=a(81506),l=a.n(o),c=a(2205),p=a.n(c),d=a(78585),h=a.n(d),u=a(29754),_=a.n(u),g=a(59713),m=a.n(g),f=(a(24812),a(21249),a(32564),a(74916),a(67294)),v=a(46458),b=a(7139),E=a(30578),w=a(63038),y=a.n(w);var I=function(e){p()(s,e);var t,a,i=(t=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=_()(t);if(a){var n=_()(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return h()(this,e)});function s(e){return n()(this,s),i.call(this,e)}return r()(s,[{key:"render",value:function(){var e=this.props.errors.mapEntries((function(e){var t=y()(e,2),a=t[0],i=t[1];if("captcha"==a||"blocked_user"==a||!isNaN(a))return[f.createElement("li",null,i)]}));return e.size>0?f.createElement("div",{"data-alert":"",className:"mt-2 alert alert-danger alert-dismissible fade show"},f.createElement("ul",{className:"pl-1 m-0"},e)):null}}]),s}(f.Component),C=a(32125),D=a(66936);var P=function(e){p()(o,e);var t,i,s=(t=o,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=_()(t);if(i){var n=_()(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return h()(this,e)});function o(e){return n()(this,o),s.call(this,e)}return r()(o,[{key:"componentDidMount",value:function(){new(a(39539).Dropdown)(document.getElementById("chat-dropdown-options"))}},{key:"render",value:function(){var e=this;return f.createElement("div",{className:"btn-group dropup disable-select pl-2 pt-2"},f.createElement("i",{className:"material-icons settings text-muted",id:"chat-dropdown-options","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},""),f.createElement("div",{className:"dropdown-menu shadow bg-white lhc-dropdown-menu rounded ml-1"},f.createElement("div",{className:"d-flex flex-row px-1"},f.createElement("a",{onClick:function(t){return e.props.toggleModal()}},f.createElement("i",{className:"material-icons chat-setting-item text-muted mr-0"},"")))))}}]),o}(f.PureComponent),O=a(50834),M=a(9931);var k,R=function(e){p()(s,e);var t,a,i=(t=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=_()(t);if(a){var n=_()(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return h()(this,e)});function s(e){return n()(this,s),i.call(this,e)}return r()(s,[{key:"componentDidMount",value:function(){O.a.sendMessageParent("readInvitation",[{name:this.props.invitation.invitation_name||"Manual"}])}},{key:"render",value:function(){return"message"==this.props.mode?f.createElement(f.Fragment,null,this.props.invitation.prev_msg&&f.createElement(M.Z,{setBotPayload:this.props.setBotPayload,content:this.props.invitation.prev_msg}),this.props.invitation.message&&f.createElement("div",{className:"message-row message-admin"},f.createElement("span",{className:"usr-tit op-tit"},f.createElement("i",{title:this.props.invitation.name_support||this.props.invitation.extra_profile,className:"chat-operators mi-fs15 mr-0"},this.props.invitation.bubble&&this.props.invitation.photo&&f.createElement("img",{src:this.props.invitation.photo,alt:"",className:"profile-msg-pic"}),(!this.props.invitation.photo||!this.props.invitation.bubble)&&f.createElement("i",{className:"material-icons "+(this.props.invitation.bubble?"icon-assistant mr-0":"")},"")),!this.props.invitation.bubble&&(this.props.invitation.name_support||this.props.invitation.extra_profile)),f.createElement("div",{className:"msg-body",dangerouslySetInnerHTML:{__html:this.props.invitation.message}})),this.props.invitation.message_full&&f.createElement(M.Z,{setBotPayload:this.props.setBotPayload,content:this.props.invitation.message_full})):f.createElement(f.Fragment,null,f.createElement("div",{id:"lhc-profile-body"},f.createElement("div",{id:"chat-status-container",className:"operator-info d-flex border-bottom p-2"},f.createElement("div",null,this.props.invitation.photo&&f.createElement("img",{width:"48",height:"48",src:this.props.invitation.photo,title:this.props.invitation.photo_title,alt:""}),!this.props.invitation.photo&&f.createElement("i",{className:"icon-assistant material-icons mr-0"},"")),f.createElement("div",{className:"p-1 pl-2 w-100"},this.props.invitation.name_support&&!this.props.invitation.hide_name&&f.createElement("div",{className:"font-weight-bold"},this.props.invitation.name_support),this.props.invitation.extra_profile&&f.createElement("i",null,this.props.invitation.extra_profile)))),"profile_only"!=this.props.mode&&this.props.invitation.message&&f.createElement("div",{id:"messagesBlock"},f.createElement("div",{className:"bottom-message position-relative"},f.createElement("div",{className:"message-row message-admin pt-1 text-left ml-3"},f.createElement("div",{className:"msg-body",dangerouslySetInnerHTML:{__html:this.props.invitation.message}})))))}}]),s}(f.PureComponent),T=a(97226),B=a(44134);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){m()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var S=(0,v.$j)((function(e){return{chatwidget:e.chatwidget}}))(k=function(e){p()(s,e);var t,a,i=(t=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=_()(t);if(a){var n=_()(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return h()(this,e)});function s(e){var t;return n()(this,s),t=i.call(this,e),m()(l()(t),"insertText",(function(e){var a=t.textMessageRef.current.selectionStart;t.setState({Question:t.state.Question.substring(0,a)+e+t.state.Question.substring(a)})})),t.apiLoaded=!1,t.state={showBBCode:null,Question:""},t.botPayload=null,t.handleSubmit=t.handleSubmit.bind(l()(t)),t.enterKeyDown=t.enterKeyDown.bind(l()(t)),t.handleContentChange=t.handleContentChange.bind(l()(t)),t.handleContentChangeCustom=t.handleContentChangeCustom.bind(l()(t)),t.setBotPayload=t.setBotPayload.bind(l()(t)),t.toggleModal=t.toggleModal.bind(l()(t)),t.textMessageRef=f.createRef(),t.messagesAreaRef=f.createRef(),t}return r()(s,[{key:"toggleModal",value:function(){this.setState({showBBCode:!this.state.showBBCode})}},{key:"enterKeyDown",value:function(e){"Enter"!==e.key||e.shiftKey||(this.handleSubmit(e),e.preventDefault())}},{key:"handleSubmit",value:function(e){if(0==this.props.chatwidget.get("processStatus")){var t=document.getElementById("CSChatMessage");null!==t&&(t.focus(),this.props.setHideMessageField(!1));var a=this.state;a.jsvar=this.props.chatwidget.get("jsVars"),a["captcha_"+this.props.chatwidget.getIn(["captcha","hash"])]=this.props.chatwidget.getIn(["captcha","ts"]),a.tscaptcha=this.props.chatwidget.getIn(["captcha","ts"]),a.user_timezone=O.a.getTimeZone(),a.URLRefer=window.location.href.substring(window.location.protocol.length),a.r=this.props.chatwidget.get("ses_ref"),""!=this.props.chatwidget.get("bot_id")&&(a.bot_id=this.props.chatwidget.get("bot_id")),""!=this.props.chatwidget.get("trigger_id")&&(a.trigger_id=this.props.chatwidget.get("trigger_id")),""!=this.props.chatwidget.get("operator")&&(a.operator=this.props.chatwidget.get("operator")),null!==this.props.chatwidget.get("pvhash")&&(a.pvhash=this.props.chatwidget.get("pvhash")),null!==this.props.chatwidget.get("priority")&&(a.priority=this.props.chatwidget.get("priority")),null!==this.props.chatwidget.get("phash")&&(a.phash=this.props.chatwidget.get("phash"));var i=O.a.getCustomFieldsSubmit(this.props.chatwidget.getIn(["customData","fields"]));null!==i&&(a=N(N({},a),i));var n={department:this.props.chatwidget.get("department"),theme:this.props.chatwidget.get("theme"),mode:this.props.chatwidget.get("mode"),vid:this.props.chatwidget.get("vid"),fields:a};this.botPayload&&(n.bpayload=this.botPayload,this.botPayload=null),!0===this.props.chatwidget.hasIn(["proactive","data","invitation_id"])&&(n.invitation_id=this.props.chatwidget.getIn(["proactive","data","invitation_id"])),this.props.dispatch((0,B.Ym)(n)),e&&e.preventDefault()}}},{key:"handleContentChange",value:function(e){var t=this,a=this.state;a[e.id]=e.value,this.setState(a),"DepartamentID"==e.id&&this.props.chatwidget.getIn(["onlineData","department","departments"]).size>0&&this.props.chatwidget.getIn(["onlineData","department","departments"]).map((function(a){a.get("value")==e.value&&(0==a.get("online")&&(t.props.dispatch({type:"dep_default",data:e.value}),t.props.dispatch({type:"onlineStatus",data:!1})),t.props.chatwidget.getIn(["onlineData","dep_forms"])!=e.value&&t.updateOnlineFieldsInit(e.value))}))}},{key:"handleContentChangeCustom",value:function(e){this.props.dispatch({type:"CUSTOM_FIELDS_ITEM",data:{id:e.field.get("index"),value:e.value}})}},{key:"componentDidMount",value:function(){O.a.prefillFields(this),this.updateOnlineFields(),null!==this.props.botPayload&&this.setBotPayload(this.props.botPayload);var e=document.getElementById("CSChatMessage-tmp");null!==e&&document.body.removeChild(e)}},{key:"componentWillUnmount",value:function(){var e=document.getElementById("messagesBlock");null!==e&&this.props.setMessages(e.innerHTML);var t=document.getElementById("lhc-profile-body");null!==t&&this.props.setProfile(t.innerHTML);var a=document.getElementById("CSChatMessage");null===a?this.props.setHideMessageField(!0):(this.props.setHideMessageField(!1),a.id="CSChatMessage-tmp",a.style.cssText="position:absolute;left:-999px;bottom:0px;",document.body.appendChild(a))}},{key:"setBotPayload",value:function(e){this.botPayload=e,this.handleSubmit()}},{key:"updateOnlineFieldsInit",value:function(e){this.props.dispatch((0,B.El)({department:this.props.chatwidget.get("department"),product:this.props.chatwidget.get("product"),theme:this.props.chatwidget.get("theme"),mode:this.props.chatwidget.get("mode"),pvhash:this.props.chatwidget.get("pvhash"),phash:this.props.chatwidget.get("phash"),bot_id:this.props.chatwidget.get("bot_id"),trigger_id:this.props.chatwidget.get("trigger_id"),vid:this.props.chatwidget.get("vid"),dep_default:e||this.props.chatwidget.get("departmentDefault")||0,online:1}))}},{key:"updateOnlineFields",value:function(){!1===this.props.chatwidget.getIn(["onlineData","fetched"])&&this.updateOnlineFieldsInit()}},{key:"componentDidUpdate",value:function(e,t,a){this.updateOnlineFields(),document.getElementById("id-container-fluid")&&O.a.sendMessageParent("widgetHeight",[{height:document.getElementById("id-container-fluid").offsetHeight+40}]);var i=!1;if(!1===this.apiLoaded&&null!==this.props.chatwidget.get("api_data")&&(this.apiLoaded=!0,this.setState(N(N({},this.state),this.props.chatwidget.get("api_data"))),i=!0),(!0===i||!1===e.chatwidget.get("shown")&&!0===this.props.chatwidget.get("shown"))&&"widget"==this.props.chatwidget.get("mode")&&this.textMessageRef.current&&(this.textMessageRef.current.focus(),this.scrollBottom()),!0===this.props.chatwidget.getIn(["onlineData","fetched"])&&!1===e.chatwidget.getIn(["onlineData","fetched"])&&(this.props.chatwidget.hasIn(["chat_ui","uprev"])&&O.a.emitEvent("play_sound",[{type:"new_message",sound_on:!0===this.props.chatwidget.getIn(["usersettings","soundOn"]),widget_open:this.props.chatwidget.get("shown")&&"widget"==this.props.chatwidget.get("mode")||document.hasFocus()}]),this.scrollBottom()),this.props.chatwidget.get("departmentDefault")!==e.chatwidget.get("departmentDefault")){this.setState({DepartamentID:this.props.chatwidget.get("departmentDefault")});var n=document.getElementById("id-department-field");null!==n&&(n.value=this.props.chatwidget.get("departmentDefault")),this.updateOnlineFieldsInit()}}},{key:"scrollBottom",value:function(){var e=this;this.messagesAreaRef.current&&(this.messagesAreaRef.current.scrollTop=this.messagesAreaRef.current.scrollHeight+1e3,setTimeout((function(){e.messagesAreaRef.current&&(e.messagesAreaRef.current.scrollTop=e.messagesAreaRef.current.scrollHeight+1e3)}),450))}},{key:"moveCaretAtEnd",value:function(e){var t=e.target.value;e.target.value="",e.target.value=t}},{key:"render",value:function(){var e=this,t=this.props.t;if(!0===this.props.chatwidget.getIn(["onlineData","fetched"])&&!0===this.props.chatwidget.getIn(["onlineData","disabled"]))return f.createElement("div",{className:"alert alert-danger m-2",role:"alert"},t("start_chat.cant_start_a_chat"));if(!1===this.props.chatwidget.getIn(["onlineData","fetched"])||!0===this.props.chatwidget.getIn(["chat_ui","auto_start"]))return null;if(this.props.chatwidget.getIn(["onlineData","fields"]).size>0&&(!this.props.chatwidget.hasIn(["chat_ui","show_messages_box"])||1!=this.props.chatwidget.getIn(["onlineData","fields_visible"])||0!=this.props.chatwidget.getIn(["customData","fields"]).size))var a=this.props.chatwidget.getIn(["onlineData","fields"]).map((function(t){return f.createElement(E.Z,{chatUI:e.props.chatwidget.get("chat_ui"),key:t.get("identifier"),isInvalid:e.props.chatwidget.hasIn(["validationErrors",t.get("identifier")]),defaultValueField:e.state[t.get("name")]||t.get("value"),attrPrefill:{attr_prefill_admin:e.props.chatwidget.get("attr_prefill_admin"),attr_prefill:e.props.chatwidget.get("attr_prefill")},onChangeContent:e.handleContentChange,field:t})}));else a="";var i=!1,n="";if(this.props.chatwidget.getIn(["customData","fields"]).size>0&&(this.props.chatwidget.getIn(["customData","fields"]).map((function(e){return i=!e.has("type")||"hidden"!==e.get("type")||i})),1==i&&(n=this.props.chatwidget.getIn(["customData","fields"]).map((function(t){return f.createElement(E.Z,{chatUI:e.props.chatwidget.get("chat_ui"),key:t.get("identifier"),isInvalid:e.props.chatwidget.hasIn(["validationErrors",t.get("identifier")]),defaultValueField:t.get("value"),onChangeContent:e.handleContentChangeCustom,field:t})})))),this.props.chatwidget.hasIn(["onlineData","paid","error"])&&this.props.chatwidget.getIn(["onlineData","paid","error"]))return f.createElement("p",{className:"p-2"},this.props.chatwidget.getIn(["onlineData","paid","message"]));if(0==this.props.chatwidget.get("processStatus")||1==this.props.chatwidget.get("processStatus")){if(this.props.chatwidget.hasIn(["chat_ui","show_messages_box"])&&this.props.chatwidget.getIn(["onlineData","department","departments"]).size<=1&&this.props.chatwidget.getIn(["onlineData","fields_visible"])<=1&&(0==this.props.chatwidget.getIn(["customData","fields"]).size||!1===i)){var s="pl-0 no-outline form-control rounded-0 form-control border-left-0 border-right-0 border-0 "+(!0===this.props.chatwidget.get("shown")&&this.textMessageRef.current&&(/\r|\n/.exec(this.state.Question)||this.state.Question.length>this.textMessageRef.current.offsetWidth/8.6)?"msg-two-line":"msg-one-line"),r="flex-grow-1 overflow-scroll position-relative",o="bottom-message px-1";return this.props.chatwidget.hasIn(["chat_ui","msg_expand"])&&"embed"==this.props.chatwidget.get("mode")&&(r="overflow-scroll position-relative",o+=" position-relative"),f.createElement(f.Fragment,null,this.state.showBBCode&&f.createElement(D.Z,{showModal:this.state.showBBCode,insertText:this.insertText,toggle:this.toggleModal,dataUrl:"/chat/bbcodeinsert?react=1"}),this.props.chatwidget.hasIn(["validationErrors","blocked_user"])&&f.createElement(T.Z,{closeText:t("button.close"),close:function(t){return e.props.dispatch((0,B.H7)(!0))},text:this.props.chatwidget.getIn(["validationErrors","blocked_user"])}),!0===this.props.chatwidget.getIn(["proactive","has"])&&!this.props.chatwidget.hasIn(["proactive","data","std_header"])&&f.createElement(R,{mode:"profile_only",invitation:this.props.chatwidget.getIn(["proactive","data"])})||this.props.chatwidget.hasIn(["chat_ui","operator_profile"])&&""!=this.props.chatwidget.getIn(["chat_ui","operator_profile"])&&f.createElement("div",{id:"lhc-profile-body"},f.createElement("div",{id:"chat-status-container",className:"p-2 border-bottom",dangerouslySetInnerHTML:{__html:this.props.chatwidget.getIn(["chat_ui","operator_profile"])}})),f.createElement("div",{className:r,id:"messagesBlock"},f.createElement("div",{className:o,id:"messages-scroll",ref:this.messagesAreaRef},!0===this.props.chatwidget.getIn(["proactive","has"])&&f.createElement(R,{mode:"message",setBotPayload:this.setBotPayload,invitation:this.props.chatwidget.getIn(["proactive","data"])}),!this.props.chatwidget.getIn(["proactive","has"])&&this.props.chatwidget.hasIn(["chat_ui","cmmsg_widget"])&&f.createElement(M.Z,{setBotPayload:this.setBotPayload,content:this.props.chatwidget.getIn(["chat_ui","cmmsg_widget"])}),1==this.props.chatwidget.get("processStatus")&&""!=this.state.Question&&f.createElement("div",{"data-op-id":"0",className:"message-row response"},f.createElement("div",{className:"msg-date"}),f.createElement("span",{title:"",className:"usr-tit vis-tit"},f.createElement("i",{title:t("start_chat.visitor"),className:"material-icons chat-operators mi-fs15 mr-0"},""),f.createElement("span",{className:"user-nick-title"},t("start_chat.visitor"))),f.createElement("div",{className:"msg-body"},this.state.Question)))),!this.props.chatwidget.getIn(["proactive","has"])&&this.props.chatwidget.hasIn(["chat_ui","custom_html_widget"])&&f.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.chatwidget.getIn(["chat_ui","custom_html_widget"])}}),(1==this.props.chatwidget.getIn(["onlineData","fields_visible"])||0==this.props.chatwidget.getIn(["onlineData","fields_visible"])&&!this.props.chatwidget.hasIn(["chat_ui","hstr_btn"]))&&f.createElement("div",{className:"d-flex flex-row border-top position-relative message-send-area"},this.props.chatwidget.hasIn(["validationErrors","question"])&&f.createElement("div",{id:"id-operator-typing",className:"bg-white pl-1"},this.props.chatwidget.getIn(["validationErrors","question"])),1==this.props.chatwidget.getIn(["onlineData","fields_visible"])&&f.createElement(f.Fragment,null,!this.props.chatwidget.hasIn(["chat_ui","bbc_btnh"])&&f.createElement(P,{toggleModal:this.toggleModal}),f.createElement("div",{className:"mx-auto w-100"},f.createElement("textarea",{autoFocus:"widget"==this.props.chatwidget.get("mode")&&!0===this.props.chatwidget.get("shown"),onFocus:this.moveCaretAtEnd,maxLength:this.props.chatwidget.getIn(["chat_ui","max_length"]),"aria-label":"Type your message here...",id:"CSChatMessage",value:1==this.props.chatwidget.get("processStatus")?"":this.state.Question,placeholder:this.props.chatwidget.hasIn(["chat_ui","placeholder_message"])?this.props.chatwidget.getIn(["chat_ui","placeholder_message"]):t("chat.type_here"),onKeyDown:this.enterKeyDown,onChange:function(t){return e.handleContentChange({id:"Question",value:t.target.value})},ref:this.textMessageRef,rows:"1",className:s})),f.createElement("div",{className:"disable-select"},f.createElement("div",{className:"user-chatwidget-buttons pt-1",id:"ChatSendButtonContainer"},1!=this.props.chatwidget.get("processStatus")&&f.createElement("a",{onClick:this.handleSubmit,title:t("button.start_chat")},f.createElement("i",{className:"material-icons text-muted settings"},"")),1==this.props.chatwidget.get("processStatus")&&f.createElement("i",{className:"material-icons text-muted settings mr-0"},"")))),0==this.props.chatwidget.getIn(["onlineData","fields_visible"])&&!this.props.chatwidget.hasIn(["chat_ui","hstr_btn"])&&f.createElement("button",{className:"mx-auto pb-1 w-100 btn btn-light rounded-0",onClick:this.handleSubmit,title:t("button.start_chat")},this.props.chatwidget.getIn(["chat_ui","custom_start_button"])||t("button.start_chat_With_us"))))}return f.createElement("div",{id:"id-container-fluid"},!0===this.props.chatwidget.getIn(["proactive","has"])&&f.createElement(R,{mode:"profile",invitation:this.props.chatwidget.getIn(["proactive","data"])})||this.props.chatwidget.hasIn(["chat_ui","operator_profile"])&&""!=this.props.chatwidget.getIn(["chat_ui","operator_profile"])&&f.createElement("div",{className:"p-2"+(this.props.chatwidget.hasIn(["chat_ui","np_border"])?"":" border-bottom"),dangerouslySetInnerHTML:{__html:this.props.chatwidget.getIn(["chat_ui","operator_profile"])}}),f.createElement("div",{className:"container-fluid"},f.createElement(I,{errors:this.props.chatwidget.get("validationErrors")}),!this.props.chatwidget.getIn(["proactive","has"])&&this.props.chatwidget.hasIn(["chat_ui","custom_html_widget"])&&f.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.chatwidget.getIn(["chat_ui","custom_html_widget"])}}),f.createElement("form",{onSubmit:this.handleSubmit},f.createElement("div",{className:"row pt-2"},a,n,this.props.chatwidget.hasIn(["onlineData","department"])&&f.createElement(C.Z,{defaultValueField:this.state.DepartamentID,setDefaultValue:this.props.chatwidget.get("departmentDefault"),onChangeContent:this.handleContentChange,isInvalidProduct:this.props.chatwidget.hasIn(["validationErrors","ProductID"]),isInvalid:this.props.chatwidget.hasIn(["validationErrors","department"]),departments:this.props.chatwidget.getIn(["onlineData","department"])})),(!this.props.chatwidget.hasIn(["chat_ui","hstr_btn"])||""!==n||""!==a||!0===this.props.chatwidget.getIn(["proactive","has"]))&&f.createElement("div",{className:"row"},f.createElement("div",{className:"col-12 pb-3"},f.createElement("button",{disabled:1==this.props.chatwidget.get("processStatus"),type:"submit",className:"btn btn-secondary btn-sm"},this.props.chatwidget.getIn(["chat_ui","custom_start_button"])||t("button.start_chat")))))))}return 2==this.props.chatwidget.get("processStatus")?f.createElement("div",{className:"container-fluid",id:"id-container-fluid"},f.createElement("div",{className:"row"},f.createElement("div",{className:"col-12"},f.createElement("p",null,t("start_chat.thank_you_for_feedback"))))):void 0}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.chatwidget.getIn(["chat_ui","auto_start"])&&0==e.chatwidget.get("processStatus")&&("embed"==e.chatwidget.get("mode")||"popup"==e.chatwidget.get("mode")||"widget"==e.chatwidget.get("mode")&&1==e.chatwidget.get("shown"))){var a=t;a.jsvar=e.chatwidget.get("jsVars"),a["captcha_"+e.chatwidget.getIn(["captcha","hash"])]=e.chatwidget.getIn(["captcha","ts"]),a.tscaptcha=e.chatwidget.getIn(["captcha","ts"]),a.user_timezone=O.a.getTimeZone(),a.URLRefer=window.location.href.substring(window.location.protocol.length),a.r=e.chatwidget.get("ses_ref"),""!=e.chatwidget.get("bot_id")&&(a.bot_id=e.chatwidget.get("bot_id")),""!=e.chatwidget.get("trigger_id")&&(a.trigger_id=e.chatwidget.get("trigger_id")),""!=e.chatwidget.get("operator")&&(a.operator=e.chatwidget.get("operator")),null!==e.chatwidget.get("priority")&&(a.priority=e.chatwidget.get("priority")),null!==e.chatwidget.get("pvhash")&&(a.pvhash=e.chatwidget.get("pvhash")),null!==e.chatwidget.get("phash")&&(a.phash=e.chatwidget.get("phash"));var i=O.a.getCustomFieldsSubmit(e.chatwidget.getIn(["customData","fields"]));null!==i&&(a=N(N({},a),i)),null!==e.chatwidget.get("api_data")&&(a=N(N({},a),e.chatwidget.get("api_data")));var n={department:e.chatwidget.get("department"),theme:e.chatwidget.get("theme"),mode:e.chatwidget.get("mode"),vid:e.chatwidget.get("vid"),fields:a};null!==e.botPayload&&(n.bpayload=e.botPayload),!0===e.chatwidget.hasIn(["proactive","data","invitation_id"])&&(n.invitation_id=e.chatwidget.getIn(["proactive","data","invitation_id"])),e.dispatch((0,B.Ym)(n))}return null}}]),s}(f.Component))||k,x=(0,b.Z)()(S)},40298:function(e){"use strict";function t(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function a(e){for(var a,n=1;n<arguments.length;n++)a=null==arguments[n]?{}:arguments[n],n%2?t(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}));return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const n={threshold:50,passive:!1};e.exports=class{constructor(e,t={}){this.options=a(a({},n),t),this.element=null,this.touchStartX=0,this.touchStartY=0,this.touchEndX=0,this.touchEndY=0,this.onSwipeLeftAgent=null,this.onSwipeRightAgent=null,this.onSwipeUpAgent=null,this.onSwipeDownAgent=null,this.onTapAgent=null,this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onSwipeLeft=this.onSwipeLeft.bind(this),this.onSwipeRight=this.onSwipeRight.bind(this),this.onSwipeUp=this.onSwipeUp.bind(this),this.onSwipeDown=this.onSwipeDown.bind(this),this.onTap=this.onTap.bind(this),this.destroy=this.destroy.bind(this),this.handleGesture=this.handleGesture.bind(this);let i=!!this.options.passive&&{passive:!0};this.element=e instanceof EventTarget?e:document.querySelector(e),this.element.addEventListener("touchstart",this.onTouchStart,i),this.element.addEventListener("touchend",this.onTouchEnd,i)}onTouchStart(e){this.touchStartX=e.changedTouches[0].screenX,this.touchStartY=e.changedTouches[0].screenY}onTouchEnd(e){this.touchEndX=e.changedTouches[0].screenX,this.touchEndY=e.changedTouches[0].screenY,this.handleGesture()}onSwipeLeft(e){this.onSwipeLeftAgent=e}onSwipeRight(e){this.onSwipeRightAgent=e}onSwipeUp(e){this.onSwipeUpAgent=e}onSwipeDown(e){this.onSwipeDownAgent=e}onTap(e){this.onTapAgent=e}destroy(){this.element.removeEventListener("touchstart",this.onTouchStart),this.element.removeEventListener("touchend",this.onTouchEnd)}handleGesture(){return this.touchEndX+this.options.threshold<=this.touchStartX?(this.onSwipeLeftAgent&&this.onSwipeLeftAgent(),"swiped left"):this.touchEndX-this.options.threshold>=this.touchStartX?(this.onSwipeRightAgent&&this.onSwipeRightAgent(),"swiped right"):this.touchEndY+this.options.threshold<=this.touchStartY?(this.onSwipeUpAgent&&this.onSwipeUpAgent(),"swiped up"):this.touchEndY-this.options.threshold>=this.touchStartY?(this.onSwipeDownAgent&&this.onSwipeDownAgent(),"swiped down"):this.touchEndY===this.touchStartY?(this.onTapAgent&&this.onTapAgent(),"tap"):void 0}}}}]);
//# sourceMappingURL=354.99a15d6533463d38256e.ie.js.map