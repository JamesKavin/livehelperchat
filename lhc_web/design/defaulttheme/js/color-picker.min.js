!function(){const t=(t,e)=>{0===t.className.split(" ").filter(t=>t===e).length&&(t.className+=` ${e}`)},e=(t,e)=>{t.className=t.className.split(" ").filter(t=>t!==e).join(" ")},i=(t,e,i)=>Math.max(Math.min(t,e),i),s=t=>{const e={h:0,s:0,b:0};if(0===t.indexOf("#")&&(t=t.substring(1)),3===t.length&&(t=t.split("").map(t=>t+t).join("")),6!==t.length)return!1;const i=(t=[t.substr(0,2),t.substr(2,2),t.substr(4,2)].map(t=>parseInt(t,16)))[0],s=t[1],r=t[2],o=Math.max(...t),n=Math.min(...t);return o===n?e.h=0:o===i&&s>=r?e.h=60*(s-r)/(o-n)+0:o===i&&s<r?e.h=60*(s-r)/(o-n)+360:o===s?e.h=60*(r-i)/(o-n)+120:o===r&&(e.h=60*(i-s)/(o-n)+240),e.s=0===o?0:1-n/o,e.b=o/255,e},r=t=>{let e={r:void 0,g:void 0,b:void 0};const i=6*(t=1-t);return Object.entries(e).reduce((t,e,s)=>Object.assign(t,{[e[0]]:Math.floor(function(){const t=(s+1)%3*2,e=i-t,r=t+2-i;if(e>=0&&r>=0)return 0;const o=Math.min(Math.abs(e),Math.abs(r),Math.abs(6-e),Math.abs(6-r));return Math.min(255,255*o)}())}),{})},o=(t,e,i)=>{const s=r(t);for(const t in s)s[t]=(255-s[t])*(1-e)+s[t],s[t]=s[t]*(1-i);return s},n=t=>{const{r:e,g:i,b:s}=t;return Math.floor(e).toString(16).padStart(2,"0")+Math.floor(i).toString(16).padStart(2,"0")+Math.floor(s).toString(16).padStart(2,"0")},h=t=>({r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16)}),a=t=>document.createElement(t);class c{constructor({dom:e=a("div"),input:i,value:s="FFF"}={}){this.dom=e;const r=this;Array.prototype.forEach.call(this.getDOM().children,t=>{t.remove()}),t(e,"color-picker");const n=a("div");n.className="color-picker-right-bar";const h=a("div");h.className="color-picker-right-bar-picker",n.appendChild(h);const c=a("div");c.className="color-picker-color-block";const l=a("div");l.className="color-picker-gradients color-picker-gradient-color";const u=a("div");u.className="color-picker-gradients color-picker-gradient-black",l.style.background="linear-gradient(to right,#FFFFFF,#FF0000)";const g=a("div");g.className="color-picker-circle",u.appendChild(g);const d=a("input"),p=a("div");p.className="color-picker-input",d.maxLength=6,d.style.width="100%",d.style.height="100%",p.appendChild(d),this.getDOM().appendChild(n),this.getDOM().appendChild(c),this.getDOM().appendChild(p),this.getDOM().appendChild(l),this.getDOM().appendChild(u),d.addEventListener("change",()=>{this.setValue(d.value,!0),this.onchange(),this.updatePicker()}),this.textInput=d,this._gradientBlack=u,this._gradientColor=l,this._rightBar=n,this._rightBarPicker=h,this._colorBlock=c,this._gradientCircle=g,this._height=0,this._mouseX=0,this._mouseY=0,this.setValue(s,!0),this._lastValue=this.value,this.updatePicker();const m=t=>{window.addEventListener("mouseup",function t(){r.getDOM().style.userSelect="text",window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",t)});const e=r._gradientBlack.getBoundingClientRect();this._mouseX=t.clientX-e.left,this._mouseY=t.clientY-e.top,this.mouseBorder(),this.setValue(o(this.height,this.position.x,this.position.y)),this.updatePicker()},_=t=>{window.addEventListener("mouseup",function t(){r.getDOM().style.userSelect="text",window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",t)});const e=r._rightBar.getBoundingClientRect();this._height=t.clientY-e.top,this.mouseBorderBar(),this.setValue(o(this.height,this.position.x,this.position.y)),this.updatePicker()};if(this._gradientBlack.addEventListener("mousedown",t=>{this.getDOM().style.userSelect="none",m(t),window.addEventListener("mousemove",m)}),this._rightBar.addEventListener("mousedown",t=>{this.getDOM().style.userSelect="none",_(t),window.addEventListener("mousemove",_)}),"ontouchstart"in window){const t=t=>{t.preventDefault(),t=t.touches[0];const e=r._gradientBlack.getBoundingClientRect();this._mouseX=t.clientX-e.left,this._mouseY=t.clientY-e.top,this.mouseBorder(),this.setValue(o(this.height,this.position.x,this.position.y)),this.updatePicker()},e=t=>{t.preventDefault(),t=t.touches[0];const e=this._rightBar.getBoundingClientRect();this._height=t.clientY-e.top,this.mouseBorderBar(),this.setValue(o(this.height,this.position.x,this.position.y)),this.updatePicker()};this._gradientBlack.addEventListener("touchmove",t),this._gradientBlack.addEventListener("touchstart",t),this._rightBar.addEventListener("touchmove",e),this._rightBar.addEventListener("touchstart",e)}this._changeFunctions=[]}onchange(){this._changeFunctions.forEach(t=>t({target:this,type:"change",timeStamp:performance.now()}))}addEventListener(t,e){if("function"==typeof e)switch(t){case"change":this._changeFunctions.push(e)}}getValue(t="value"){switch(t){case"hex":return this._value;case"rgb":return h(this.getValue("hex"));case"hsb":return s(this.getValue("hex"));case"value":default:return"#"+this._value}}getBrightness(){const{r:t,g:e,b:i}=this.getValue("rgb");return.299*t+.587*e+.114*i}setValue(t,e=!1){let i,r="";switch(typeof t){case"string":0===t.indexOf("#")&&(t=t.substring(1)),3===t.length&&(t=t.split("").map(t=>t+t).join("")),6!==t.length&&(t="FFFFFF"),r=t;break;case"object":r=n(t)}try{i=h(r)}catch(t){i={r:255,g:255,b:255}}const{r:o,g:a,b:c}=i;if(this._value=n({r:o,g:a,b:c}).toUpperCase(),this.textInput.value=this._value,this._colorBlock.style.backgroundColor=this.getValue(),e){const{h:t,s:e,b:i}=s(r);this._height=1-t/360,0===t&&(this._height=0),this._mouseX=e,this._mouseY=1-i}else this._lastValue!==this.value&&this.onchange();this._lastValue=this.value}getDOM(){return this.dom}mouseBorder(){this._mouseX=i(this._mouseX/(this._gradientBlack.getBoundingClientRect().width-2),1,0),this._mouseY=i(this._mouseY/(this._gradientBlack.getBoundingClientRect().height-2),1,0)}mouseBorderBar(){this._height=i(this._height/(this._rightBar.getBoundingClientRect().height-2),1,0)}updatePicker(){const i=this.position,s=this._gradientCircle;s.style.left=`${100*i.x}%`,s.style.top=`${100*i.y}%`,this._rightBarPicker.style.top=`${100*this.height}%`,this._gradientColor.style.background=`linear-gradient(to right,#FFFFFF,#${n(r(this.height))})`,this.getBrightness()>152?(t(s,"color-picker-circle-black"),e(s,"color-picker-circle-white")):(e(s,"color-picker-circle-black"),t(s,"color-picker-circle-white"))}get position(){return{x:this._mouseX,y:this._mouseY}}get height(){return this._height}get value(){return this.getValue()}set value(t){this.setValue(t,!0),this.updatePicker()}}"object"==typeof exports?module.exports.ColorPicker=c:"object"==typeof window&&(window.ColorPicker=c)}();