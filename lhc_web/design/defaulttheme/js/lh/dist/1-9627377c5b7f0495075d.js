webpackJsonp([1],[,,function(t,i,n){function e(t){return n(o(t))}function o(t){return s[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var s={"./chat-window":3,"./chat-window.js":3,"./reveal-modal":4,"./reveal-modal.js":4,"./speak/lhc.speak":5,"./speak/lhc.speak.js":5};e.keys=function(){return Object.keys(s)},e.resolve=o,t.exports=e,e.id=2},function(t){t.exports={processCollapse:function(t){$("#chat-main-column-"+t+" .collapse-right").hasClass("icon-left-circled")?($("#chat-right-column-"+t).show(),$("#chat-main-column-"+t).removeClass("large-12"),$("#chat-main-column-"+t+" .collapse-right").removeClass("icon-left-circled").addClass("icon-right-circled"),$(document).foundation("section","reflow")):($("#chat-right-column-"+t).hide(),$("#chat-main-column-"+t).addClass("large-12"),$("#chat-main-column-"+t+" .collapse-right").addClass("icon-left-circled").removeClass("icon-right-circled"))}}},function(t){var i={cancelcolorbox:function(){$("#myModal").foundation("reveal","close")},initializeModal:function(t){var i=void 0!=t?t:"myModal";0==$("#"+i).size()&&($("body").prepend('<div id="'+i+'" class="reveal-modal large"><a class="close-reveal-modal">&#215;</a></div>'),$("#"+i).on("opened",function(){$(document).foundation("section","reflow")}))},revealModal:function(t,n){void 0!==n&&n===!0&&($("#myModal").remove(),$(".reveal-modal-bg").remove()),i.initializeModal("myModal"),$("#myModal").foundation("reveal","open",{url:t})},revealIframe:function(t,n){i.initializeModal(),$("#myModal").html('<a class="close-reveal-modal">&#215;</a><iframe src="'+t+'" frameborder="0" style="width:100%" height="'+n+'" />'),$("#myModal").foundation("reveal","open")}};t.exports=i},function(t){var i=function(){function t(t){this.recognizing=!1,this.startOnEnd=!1,this.final_transcript="",this.chat_id=t.chat_id,this.recognition=t.recognition,this.originText=""!=$("#CSChatMessage-"+this.chat_id).val()?$("#CSChatMessage-"+this.chat_id).val()+" ":""}return t.prototype.onstart=function(){$("#CSChatMessage-"+this.chat_id).addClass("admin-chat-mic"),$("#user-chat-status-"+this.chat_id).removeClass("icon-user").addClass("icon-mic"),$("#mic-chat-"+this.chat_id).addClass("icon-mic-recording").html(this.recognition.lang),$("#user-is-typing-"+this.chat_id).html("Speak now.").css("visibility","visible")},t.prototype.onend=function(){$("#user-chat-status-"+this.chat_id).addClass("icon-user").removeClass("icon-mic"),$("#CSChatMessage-"+this.chat_id).removeClass("admin-chat-mic"),$("#mic-chat-"+this.chat_id).removeClass("icon-mic-recording").html(""),$("#user-is-typing-"+this.chat_id).html(""),1==this.startOnEnd&&(this.originText="",this.final_transcript="",this.startOnEnd=!1,this.recognition.start())},t.prototype.onerror=function(t){"no-speech"==t.error&&$("#user-is-typing-"+this.chat_id).html("No speech was detected.").css("visibility","visible"),"audio-capture"==t.error&&$("#user-is-typing-"+this.chat_id).html("No microphone was found.").css("visibility","visible"),"not-allowed"==t.error&&$("#user-is-typing-"+this.chat_id).html("Permission to use microphone was denied.").css("visibility","visible")},t.prototype.onresult=function(t){if(0==this.startOnEnd){for(var i="",n=t.resultIndex;n<t.results.length;++n)t.results[n].isFinal?this.final_transcript+=t.results[n][0].transcript:i+=t.results[n][0].transcript;""!=i?$("#user-is-typing-"+this.chat_id).html(i).css("visibility","visible"):$("#user-is-typing-"+this.chat_id).html("").css("visibility","hidden"),$("#CSChatMessage-"+this.chat_id).val(this.originText+this.final_transcript+i).focus(),lhinst.operatorTypingCallback(this.chat_id)}},t}();t.exports=function(){function t(){"webkitSpeechRecognition"in window?(this.recognizing=!1,this.browserSupported=!0,this.final_transcript="",this.chat_id=!1,this.chatDialect=[]):(alert("Sorry but only chrome is supported"),this.browserSupported=!1)}return t.prototype.stopSpeech=function(){1==this.browserSupported&&1==this.recognizing&&(this.recognizing=!1,this.recognition.stop())},t.prototype.messageSend=function(){1==this.browserSupported&&(this.recognition.callbackHandler.startOnEnd=!0,this.recognition.stop())},t.prototype.setChatDialect=function(t,i){this.chatDialect[t]=i},t.prototype.getChatDialectAndStart=function(){var t=this;$.getJSON(WWW_DIR_JAVASCRIPT+"speech/getchatdialect/"+this.chat_id,function(i){0==i.error?(t.chatDialect[t.chat_id]=i.dialect,t.recognition.lang=t.chatDialect[t.chat_id],t.recognition.start()):alert(i.result)})},t.prototype.listen=function(t){if(1==this.browserSupported)if(this.chat_id!==!1&&this.chat_id!=t.chat_id&&this.stopSpeech(),this.chat_id=t.chat_id,0==this.recognizing){this.recognition=new webkitSpeechRecognition,this.recognition.continuous=!0,this.recognition.interimResults=!0;var n=new i({chat_id:this.chat_id,recognition:this.recognition});this.recognition.onresult=function(t){n.onresult(t)},this.recognition.onstart=function(){n.onstart()},this.recognition.onend=function(){n.onend()},this.recognition.onerror=function(t){n.onerror(t)},this.recognition.callbackHandler=n,this.recognizing=!0,void 0!=this.chatDialect[this.chat_id]?(this.recognition.lang=this.chatDialect[this.chat_id],this.recognition.start()):this.getChatDialectAndStart()}else this.stopSpeech()},new t}()}]);