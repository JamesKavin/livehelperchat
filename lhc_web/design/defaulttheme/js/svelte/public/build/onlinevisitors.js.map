{"version":3,"file":"onlinevisitors.js","sources":["../../src/LHCOnlineVisitors.svelte"],"sourcesContent":["<svelte:options customElement={{\n\t\ttag: 'lhc-online-visitors',\n\t\tshadow: 'none'}}/>\n<script>\n    import { lhcOnlineVisitors, lhcList} from './stores.js';\n\n    import { onMount } from 'svelte';\n    import lhcServices from './lib/Services.js';\n\n    export let www_dir_flags = \"\";\n    export let track_is_online = false;\n    export let soundEnabled;\n    export let notificationEnabled;\n    export let online_connected;\n    export let max_rows;\n    export let timeout = \"3600\";\n    export let country = \"none\";\n    export let forbiddenVisitors = \"false\";\n    export let updateTimeout = 10;\n    export let time_on_site = \"\";\n    export let online_check = null;\n    export let groupByField;\n\n    let lhcLogic = {\n        timeoutVisitors: null,\n        department_dpgroups: [],\n        department: [],\n        time_on_site: time_on_site,\n        country: country,\n        max_rows: parseInt(max_rows),\n        updateTimeout: parseInt(updateTimeout),\n        timeout: timeout,\n        lhcListRequestInProgress: false,\n        timeoutControl: null,\n        forbiddenVisitors : forbiddenVisitors === 'true',\n        soundEnabled : soundEnabled === 'true',\n        notificationEnabled : notificationEnabled === 'true',\n        lastSyncSkipped : false,\n        attrf_key_1 : \"\",\n        attrf_val_1 : \"\",\n        attrf_key_2 : \"\",\n        attrf_val_2 : \"\",\n        attrf_key_3 : \"\",\n        attrf_val_3 : \"\",\n        attrf_key_4 : \"\",\n        attrf_val_4 : \"\",\n        attrf_key_5 : \"\",\n        attrf_val_5 : \"\",\n        query : \"\",\n        onlineusersPreviousID : [],\n        wasInitiated : false,\n        online_connected : online_connected === 'true',\n        predicate : 'last_visit',\n        reverse : true,\n        groupByField : groupByField\n    };\n\n    ee.addListener('svelteOnlineUserSetting',function (settingName, value) {\n        if (settingName == 'disableNewUserBNotif') {\n            lhcLogic.notificationEnabled = !lhcLogic.notificationEnabled;\n            lhinst.changeUserSettings('new_user_bn', lhcLogic.notificationEnabled == true ? 1 : 0);\n            setInnerText('disableNewUserBNotif',lhcLogic.notificationEnabled ? 'visibility' : 'visibility_off');\n        } else if (settingName == 'disableNewUserSound') {\n            lhcLogic.soundEnabled = !lhcLogic.soundEnabled;\n            lhinst.changeUserSettings('new_user_sound',lhcLogic.soundEnabled == true ? 1 : 0);\n            setInnerText('disableNewUserSound',lhcLogic.soundEnabled ? 'volume_up':'volume_off');\n        } else if (settingName == 'showConnected') {\n            lhcLogic.online_connected = !lhcLogic.online_connected;\n            lhinst.changeUserSettings('online_connected',lhcLogic.online_connected == true ? 1 : 0);\n            setInnerText('showConnected',lhcLogic.online_connected ? 'flash_on' : 'flash_off');\n        } else if (settingName == 'countryFilter') {\n            lhcLogic.country = value;\n            lhinst.changeUserSettingsIndifferent('ocountry',value);\n            setTimeout(() => syncOnlineVisitors(),500);\n        } else if (settingName == 'maxrowsFilter') {\n            lhinst.changeUserSettingsIndifferent('omax_rows',value);\n            lhcLogic.max_rows = parseInt(value);\n            setTimeout(() => syncOnlineVisitors(),500);\n        } else if (settingName == 'userTimeoutFilter') {\n            lhinst.changeUserSettingsIndifferent('ouser_timeout',value);\n            lhcLogic.timeout = parseInt(value);\n            setTimeout(() => syncOnlineVisitors(),500);\n        } else if (settingName == 'updateTimeoutFilter') {\n            lhinst.changeUserSettingsIndifferent('oupdate_timeout',value);\n            lhcLogic.updateTimeout = parseInt(value);\n            setTimeout(() => syncOnlineVisitors(),500);\n        } else if (settingName == 'timeOnSiteFilter') {\n            lhinst.changeUserSettingsIndifferent('otime_on_site',value == '' ? 'none' : value);\n            lhcLogic.time_on_site = value;\n            setTimeout(() => syncOnlineVisitors(),500);\n        } else if (settingName == 'groupBy') {\n            lhcLogic.groupByField = value;\n            lhinst.changeUserSettingsIndifferent('ogroup_by',value);\n            setTimeout(() => syncOnlineVisitors(),500);\n        } else if (settingName == 'setQuery') {\n            lhcLogic.query = value;\n        } else if (settingName == 'departments') {\n            let departments = [];\n            jQuery('.online-department-filter input[name^=department_ids]').each(function(i){\n                departments.push(parseInt(this.value));\n            });\n            lhcLogic.department = departments;\n            setTimeout(() => syncOnlineVisitors(),500);\n            lhcServices.setLocalSettings('department_online', lhcLogic.department);\n        }\n    });\n\n    ee.addListener('svelteOnlineUserSettingKey',function (key, value) {\n        lhinst.changeUserSettingsIndifferent(key,value);\n        setTimeout(() => syncOnlineVisitors(),500);\n    })\n\n\n    onMount(async() => {\n        if (lhcLogic.forbiddenVisitors !== true) {\n            ['onlineusers','widget-onvisitors','map','dashboard'].forEach(function(item){\n                var itemTab = document.getElementById(item);\n                if (itemTab !== null) {\n                    var observer = new MutationObserver(function (event) {\n                        if (itemTab.classList.contains('active') && lhcLogic.lastSyncSkipped === true) {\n                            syncOnlineVisitors();\n                        }\n                    })\n                    observer.observe(itemTab, {\n                        attributes: true,\n                        attributeFilter: ['class'],\n                        childList: false,\n                        characterData: false\n                    })\n                }\n            });\n        }\n\n        if (window['onlineAttributeFilter']) {\n            lhcLogic.attrf_key_1 = window['onlineAttributeFilter']['attrf_key_1'];\n            lhcLogic.attrf_val_1 = window['onlineAttributeFilter']['attrf_val_1'];\n            lhcLogic.attrf_key_2 = window['onlineAttributeFilter']['attrf_key_2'];\n            lhcLogic.attrf_val_2 = window['onlineAttributeFilter']['attrf_val_2'];\n            lhcLogic.attrf_key_3 = window['onlineAttributeFilter']['attrf_key_3'];\n            lhcLogic.attrf_val_3 = window['onlineAttributeFilter']['attrf_val_3'];\n            lhcLogic.attrf_key_4 = window['onlineAttributeFilter']['attrf_key_4'];\n            lhcLogic.attrf_val_4 = window['onlineAttributeFilter']['attrf_val_4'];\n            lhcLogic.attrf_key_5 = window['onlineAttributeFilter']['attrf_key_5'];\n            lhcLogic.attrf_val_5 = window['onlineAttributeFilter']['attrf_val_5'];\n\n            for (let i = 1; i <= 5; i++) {\n                document.getElementById('svelte-attrf_key_'+i).value = lhcLogic['attrf_key_'+i];\n                document.getElementById('svelte-attrf_val_'+i).value = lhcLogic['attrf_val_'+i];\n            }\n        }\n\n        setInnerText('disableNewUserBNotif', lhcLogic.notificationEnabled ? 'visibility' : 'visibility_off');\n        setInnerText('disableNewUserSound', lhcLogic.soundEnabled ? 'volume_up':'volume_off');\n        setInnerText('showConnected', lhcLogic.online_connected ? 'flash_on' : 'flash_off');\n\n        setValue('countryFilter',lhcLogic.country);\n        setValue('maxrowsFilter',lhcLogic.max_rows);\n        setValue('userTimeoutFilter',lhcLogic.timeout);\n        setValue('updateTimeoutFilter',lhcLogic.updateTimeout);\n        setValue('time_on_siteFilter',lhcLogic.time_on_site);\n        setValue('groupByField',lhcLogic.groupByField);\n\n        let departments = [];\n        jQuery('.online-department-filter input[name^=department_ids]').each(function(i){\n            departments.push(parseInt(this.value));\n        });\n        lhcLogic.department = departments;\n\n        syncOnlineVisitors();\n    });\n\n    function setInnerText(id,value) {\n        let elm = document.getElementById('svelte-'+id);\n        if (elm) {\n            elm.innerText = value;\n        }\n    }\n\n    function setValue(id,value) {\n        let elm = document.getElementById('svelte-'+id);\n        if (elm) {\n            elm.value = value;\n        }\n    }\n\n    function getSyncFilter()\n    {\n        return \"/(method)/ajax/(timeout)/\" + lhcLogic.timeout + (lhcLogic.department_dpgroups.length > 0 ? '/(department_dpgroups)/' + lhcLogic.department_dpgroups.join('/') : '' ) + (lhcLogic.department.length > 0 ? '/(department)/' + lhcLogic.department.join('/') : '' ) + (lhcLogic.max_rows > 0 ? '/(maxrows)/' + lhcLogic.max_rows : '' ) + (lhcLogic.country != '' ? '/(country)/' + lhcLogic.country : '' ) + (lhcLogic.time_on_site != '' ? '/(timeonsite)/' + encodeURIComponent(lhcLogic.time_on_site) : '');\n\n    }\n\n    function deleteUser(ou) {\n        if (confirm('Are you sure?')) {\n            fetch(WWW_DIR_JAVASCRIPT  + 'chat/onlineusers/(deletevisitor)/'+ou.id + '/(csfr)/' + confLH.csrf_token, {\n                method: \"POST\",\n                headers: {\n                    Accept: \"application/json\",\n                    \"Content-Type\": \"application/json\",\n                    \"X-CSRFToken\": confLH.csrf_token\n                }\n            });\n            setTimeout(() => syncOnlineVisitors(),500);\n        }\n    }\n    function sortOn( collection, name, reverse ) {\n        collection.sort(\n            function( a, b ) {\n                if ( a[ name ] <= b[ name ] ) {\n                    return( !reverse || reverse === false ? -1 : 1);\n                }\n                return( !reverse || reverse === false ? 1 : -1 );\n            }\n        );\n    }\n\n    // http://www.bennadel.com/blog/2456-grouping-nested-ngrepeat-lists-in-angularjs.htm\n    // I group the friends list on the given property.\n    function groupBy( list ) {\n        // First, reset the groups.\n        let onlineusersGrouped = [];\n\n        // Now, sort the collection of friend on the\n        // grouping-property. This just makes it easier\n        // to split the collection.\n        sortOn( list, lhcLogic.groupByField );\n\n        // I determine which group we are currently in.\n        var groupValue = \"_INVALID_GROUP_VALUE_\";\n\n        // As we loop over each friend, add it to the\n        // current group - we'll create a NEW group every\n        // time we come across a new attribute value.\n        for ( var i = 0 ; i < list.length ; i++ ) {\n            var friend = list[ i ];\n            // Should we create a new group?\n            if ( friend[ lhcLogic.groupByField ] !== groupValue ) {\n                var group = {\n                    label: friend[ lhcLogic.groupByField ],\n                    id: i,\n                    ou: []\n                };\n                groupValue = group.label;\n                onlineusersGrouped.push( group );\n            }\n            // Add the friend to the currently active\n            // grouping.\n            group.ou.push( friend );\n        }\n        return onlineusersGrouped;\n    }\n\n    async function syncOnlineVisitors(){\n\n        if (lhinst.disableSync == true || lhcLogic.forbiddenVisitors == true ) {\n            return;\n        }\n\n        // Check is online visitors tab is active or widget is expanded\n        // otherwise also do not sync and save resources\n        var activeList = false;\n\n        var itemTab = document.getElementById('onlineusers');\n        if (itemTab !== null) {\n            activeList = itemTab.classList.contains('active');\n        }\n\n        if (activeList == false){\n            var mapItem = document.getElementById('map');\n            if (mapItem !== null) {\n                activeList = mapItem.classList.contains('active');\n            }\n        }\n\n        if (activeList == false) {\n            var widgetItem = document.getElementById('widget-onvisitors-body');\n            if (widgetItem !== null) {\n                var dashboardTab = document.getElementById('dashboard');\n                if (dashboardTab !== null && dashboardTab.classList.contains('active')) {\n                    activeList = true;\n                }\n            }\n        }\n\n        if (activeList === false) {\n            lhcLogic.lastSyncSkipped = true;\n            return;\n        }\n\n        lhcLogic.lastSyncSkipped = false;\n\n        clearTimeout(lhcLogic.timeoutControl);\n\n        try {\n            const responseTrack = await fetch(WWW_DIR_JAVASCRIPT  + 'chat/onlineusers' + getSyncFilter(), {\n                method: \"GET\",\n                headers: {\n                    Accept: \"application/json\",\n                    \"Content-Type\": \"application/json\",\n                }\n            });\n\n            if (!responseTrack.ok) {\n                throw new Error(\"Network response was not OK [\" + responseTrack.status + \"] [\"+ responseTrack.statusText+\"]\");\n            }\n\n            const data = await responseTrack.json();\n            lhcOnlineVisitors.update((list) => {\n                list.onlineusers = data.list;\n                list.onlineusers_tt = data.tt;\n                if (lhcLogic.groupByField !== 'none') {\n                    list.onlineusersGrouped = groupBy(list.onlineusers);\n                } else {\n                    list.onlineusersGrouped = [];\n                    list.onlineusersGrouped.push({label:'',id:0,ou:list.onlineusers});\n                }\n\n                list.onlineusersGrouped.forEach((item) => {\n                    sortOn(item.ou,lhcLogic.predicate,lhcLogic.reverse);\n                });\n\n                return list;\n            });\n\n            let onlineCounter = document.getElementById('online-users-count');\n            if (onlineCounter) {\n                onlineCounter.innerText = data.list.length;\n            }\n\n            ee.emitEvent('chatAdminSyncOnlineVisitors', [data.list]);\n\n            if (lhcLogic.notificationEnabled || lhcLogic.soundEnabled) {\n                var hasNewVisitors = false;\n                var newVisitors = [];\n\n                $lhcOnlineVisitors.onlineusers.forEach((value) => {\n                    var hasValue = true;\n                    if (lhcLogic.onlineusersPreviousID.indexOf(value.id) === -1) {\n                        hasValue = false;\n                        lhcLogic.onlineusersPreviousID.push(value.id);\n                    }\n\n                    if (lhcLogic.wasInitiated === true && hasValue === false) {\n                        hasNewVisitors = true;\n                        newVisitors.push(value);\n                    }\n                });\n\n                if (hasNewVisitors == true ) {\n                    if (lhcLogic.soundEnabled && Modernizr.audio){\n                        var audio = new Audio();\n                        audio.src = Modernizr.audio.ogg ? WWW_DIR_JAVASCRIPT_FILES + '/new_visitor.ogg' :\n                            Modernizr.audio.mp3 ? WWW_DIR_JAVASCRIPT_FILES + '/new_visitor.mp3' : WWW_DIR_JAVASCRIPT_FILES + '/new_visitor.wav';\n                        audio.load();\n                        setTimeout(function(){\n                            audio.play();\n                        },500);\n                    };\n\n                    if (lhcLogic.notificationEnabled && (window.webkitNotifications || window.Notification)) {\n                        angular.forEach(newVisitors, function(value, key) {\n                            if (window.webkitNotifications) {\n                                var havePermission = window.webkitNotifications.checkPermission();\n                                if (havePermission == 0) {\n                                    // 0 is PERMISSION_ALLOWED\n                                    var notification = window.webkitNotifications.createNotification(\n                                        WWW_DIR_JAVASCRIPT_FILES_NOTIFICATION + '/notification.png',\n                                        value.ip+(value.user_country_name != '' ? ', '+value.user_country_name : ''),\n                                        (value.page_title != '' ? value.page_title+\"\\n-----\\n\" : '')+(value.referrer != '' ? value.referrer+\"\\n-----\\n\" : '')\n                                    );\n                                    notification.onclick = function () {\n                                        notification.cancel();\n                                    };\n                                    notification.show();\n\n                                    setTimeout(function(){\n                                        notification.cancel();\n                                    },15000);\n                                }\n                            } else if(window.Notification) {\n                                if (window.Notification.permission == 'granted') {\n                                    var notification = new Notification(value.ip+(value.user_country_name != '' ? ', '+value.user_country_name : ''), { icon: WWW_DIR_JAVASCRIPT_FILES_NOTIFICATION + '/notification.png', body: (value.page_title != '' ? value.page_title+\"\\n-----\\n\" : '')+(value.referrer != '' ? value.referrer+\"\\n-----\\n\" : '') });\n                                    notification.onclick = function () {\n                                        notification.close();\n                                    };\n                                    setTimeout(function(){\n                                        notification.close();\n                                    },15000);\n                                }\n                            }\n                        })\n                    }\n                }\n\n                lhcLogic.wasInitiated = true;\n                if (lhcLogic.onlineusersPreviousID.length > 100) {\n                    lhcLogic.wasInitiated = false;\n                    lhcLogic.onlineusersPreviousID = [];\n                }\n            }\n\n            if (lhcLogic.forbiddenVisitors !== true) {\n                lhcLogic.timeoutControl = setTimeout(function(){\n                    syncOnlineVisitors();\n                },lhcLogic.updateTimeout * 1000);\n            }\n\n        } catch (error) {\n\n            lhcLogic.timeoutControl = setTimeout(function(){\n                syncOnlineVisitors();\n            },lhcLogic.updateTimeout * 1000);\n\n            console.error(\"There has been a problem with your fetch operation:\", error);\n        }\n    }\n\n    function matchesFilter(ou) {\n\n        if (ou.nick && ou.nick.toLowerCase().includes(lhcLogic.query)) {\n            return true;\n        }\n\n        if (ou.user_country_code && ou.user_country_code.toLowerCase().includes(lhcLogic.query)) {\n            return true;\n        }\n\n        if (ou.user_country_name && ou.user_country_name.toLowerCase().includes(lhcLogic.query)) {\n            return true;\n        }\n\n        if (ou.page_title && ou.page_title.toLowerCase().includes(lhcLogic.query)) {\n            return true;\n        }\n\n        if (ou.current_page && ou.current_page.toLowerCase().includes(lhcLogic.query)) {\n            return true;\n        }\n\n        if (ou.referrer && ou.referrer.toLowerCase().includes(lhcLogic.query)) {\n            return true;\n        }\n\n        if (ou.visitor_tz && ou.visitor_tz.toLowerCase().includes(lhcLogic.query)) {\n            return true;\n        }\n\n        return false;\n    }\n\n    function setSort(predicate){\n        lhcLogic.predicate = predicate;\n        lhcLogic.reverse = !lhcLogic.reverse;\n        syncOnlineVisitors();\n    }\n\n</script>\n\n<table class=\"table table-sm online-users-table\" class:filter-online-active={lhcLogic.online_connected} cellpadding=\"0\" cellspacing=\"0\">\n<thead>\n<tr>\n    <th width=\"50%\" colspan=\"2\">\n        <a class=\"material-icons\" on:click={(e) => setSort('last_visit')} title=\"Last activity\" >access_time</a>\n        <a class=\"material-icons\" on:click={(e) => setSort('time_on_site')} title=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/onlineusers','Time on site');?>\">access_time</a>\n        <a class=\"material-icons\" on:click={(e) => setSort('visitor_tz_time')} title=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/onlineusers','Visitor local time');?>\">access_time</a>\n        {#if track_is_online}<a class=\"material-icons\" on:click={(e) => setSort('last_check_time')} title=\"<?php echo erTranslationClassLhTranslation::getInstance()->getTranslation('chat/onlineusers','By user status on site');?>\">access_time</a>{/if}\n        <a href=\"#\" on:click={(e) => setSort('current_page')} >Page</a> | <a href=\"#\" on:click={(e) => setSort('referrer')}>Came from</a>\n    </th>\n\n    {#if $lhcList.additionalColumns}\n        {#each $lhcList.additionalColumns as column}\n            {#if column.oenabl == true && !column.iconm}\n                <th>\n                    {#if column.icon !== ''}<i class=\"material-icons text-muted\">{column.icon}</i>{/if}{column.name}\n                </th>\n            {/if}\n        {/each}\n    {/if}\n\n    <!--<th nowrap=\"nowrap\" ng-repeat=\"column in lhc.additionalColumns\" ng-if=\"column.oenabl == true\">\n        <i ng-if=\"column.icon !== ''\" class=\"material-icons\">{{column.icon}}</i>{{column.name}}\n    </th>-->\n\n    <th width=\"1%\">Action</th>\n</tr>\n</thead>\n{#each $lhcOnlineVisitors.onlineusersGrouped as group}\n<tbody>\n    {#if lhcLogic.groupByField != \"none\"}\n    <tr>\n        <td colspan=\"6\"><h5 class=\"group-by-{lhcLogic.groupByField}\">{group.label ? group.label : \"-\"} ({group.ou.length})</h5></td>\n    </tr>\n    {/if}\n    {#each group.ou as ou (ou.id)}\n        {#if lhcLogic.query == '' || matchesFilter(ou)}\n            <tr id=\"uo-vid-{ou.vid}\" class=\"online-user-filter-row\" class:online_user={online_check && ou.last_check_time_ago < (parseInt(online_check) + 3)} class:recent_visit={ou.last_visit_seconds_ago < 15} class:bg-red={online_check}>\n                <td nowrap width=\"1%\">\n                    <div>\n                        {ou.lastactivity_ago} ago<br/>\n                        <span class=\"fs-11\">{ou.time_on_site_front}</span>\n                    </div>\n                </td>\n                <td>\n                    {#if ou.vid}\n                        <div class=\"btn-group\" role=\"group\" aria-label=\"...\">\n                            <a href=\"#\" class=\"btn btn-xs btn-secondary\" title=\"Copy nick\" onclick=\"lhinst.copyContent($(this))\" data-success=\"Copied\" data-copy={ou.nick}><i class=\"material-icons me-0\">content_copy</i></a>\n\n                            <a href=\"#\" on:click={(e) => {lhc.revealModal({'url':WWW_DIR_JAVASCRIPT+'chat/getonlineuserinfo/'+ou.id})}}  class=\"btn btn-xs btn-secondary\" id=\"ou-face-{ou.vid}\" class:icon-user-away={ou.online_status == 1} class:icon-user-online={!ou.online_status || ou.online_status == 0} ><i class=\"material-icons\">info_outline</i>{ou.nick}&nbsp;\n                                {#if ou.user_country_code}\n                                    <span><img src={www_dir_flags + \"/\" + ou.user_country_code + \".png\"} alt={ou.user_country_name} title={ou.user_country_name} /></span>\n                                {/if}\n                            </a>\n\n                            {#if ou.chat_id > 0 && ou.can_view_chat == 1}\n                                <span on:click={(e) => lhc.revealModal({'url':WWW_DIR_JAVASCRIPT+'chat/previewchat/'+ou.chat_id}) } class=\"btn btn-xs btn-success action-image\"><i class=\"material-icons\">chat</i>Chat</span>\n                            {/if}\n\n                            {#if ou.total_visits > 1}\n                                <span class=\"btn btn-xs btn-info\"><i class=\"material-icons\">face</i>Returning ({ou.total_visits})</span>\n                            {/if}\n\n                            {#if ou.total_visits == 1}\n                                <span class=\"btn btn-success btn-xs\"><i class=\"material-icons\">face</i>New</span>\n                            {/if}\n\n                            {#if ou.operator_message}\n                                <span title=\"{ou.operator_user_string} has sent a message to the user\" class={\"btn btn-xs \"+(ou.message_seen == 1 ? 'btn-success' : 'btn-danger')} ><i class=\"material-icons\">chat_bubble_outline</i>{ou.message_seen == 1 ? \"tr.msg_seen\": \"tr.msg_not_seen\"}</span>\n                            {/if}\n\n                            {#if ou.user_country_code != ''}\n                                <span class=\"btn btn-xs btn-primary up-case-first\" ng-if=\"ou.user_country_code != ''\">{ou.user_country_name}{ou.city != '' ? ' | '+ou.city : ''}</span><span class=\"btn btn-primary btn-xs\"><i class=\"material-icons\">access_time</i>{ou.visitor_tz} - {ou.visitor_tz_time}</span>\n                            {/if}\n\n                            <a href=\"#\" class=\"btn btn-xs btn-secondary\" on:click={(e) => lhc.revealModal({'url':WWW_DIR_JAVASCRIPT+'chat/sendnotice/'+ou.id})}><i class=\"material-icons\">send</i>Start a chat</a>\n\n                        </div>\n                    {/if}\n\n                    {#if ou.page_title || ou.current_page}\n                        <div class=\"abbr-list\" >\n                            <i class=\"material-icons\" title=\"Page\">&#xE8A0;</i><a target=\"_blank\" href={ou.current_page} title={ou.current_page}>{ou.page_title || ou.current_page}</a>\n                        </div>\n                    {/if}\n\n                    {#if ou.referrer}\n                        <div class=\"abbr-list\">\n                            <i class=\"material-icons\" title=\"From\">&#xE8A0;</i><a target=\"_blank\" href=\"http:{ou.referrer}\" title={ou.referrer}>{ou.referrer}</a>\n                        </div>\n                    {/if}\n                </td>\n                {#if $lhcList.additionalColumns}\n                    {#each $lhcList.additionalColumns as column}\n                        {#if column.oenabl == true && !column.iconm}\n                            <td>\n                                {#each column.items as val}\n                                    {#if ou[val]}\n                                        <div class=\"abbr-list\">{ou[val]}</div>\n                                    {/if}\n                                {/each}\n                            </td>\n                        {/if}\n                    {/each}\n                {/if}\n                <td>\n                    <div style=\"width:90px\" ng-if=\"ou.vid\">\n                        <div class=\"btn-group\" role=\"group\" aria-label=\"...\">\n                            <button on:click={(e) => lhc.revealModal({'url':WWW_DIR_JAVASCRIPT+'chat/sendnotice/'+ou.id})} class=\"btn btn-secondary btn-sm material-icons mat-100 me-0\" title=\"Send message\">chat</button>\n                            <button on:click={deleteUser(ou)} class=\"btn btn-danger btn-sm material-icons mat-100 me-0\" title=\"Delete, ID - {ou.id}\">delete</button>\n                        </div>\n                    </div>\n                </td>\n            </tr>\n        {/if}\n    {/each}\n</tbody>\n{/each}\n</table>"],"names":["insert","target","a","anchor","each_value_4","ensure_array_like","ctx","additionalColumns","length","i","t0_value","name","icon","create_if_block_16","th","dirty","set_data","t0","t_value","t","if_block","oenabl","iconm","create_if_block_15","label","ou","attr","h5","h5_class_value","groupByField","tr","append","td","t2","t2_value","lastactivity_ago","t3_value","time_on_site_front","if_block0","vid","create_if_block_6","if_block1","page_title","current_page","create_if_block_5","if_block2","referrer","create_if_block_4","if_block3","create_if_block_1","button1","button1_title_value","id","tr_id_value","last_check_time_ago","parseInt","last_visit_seconds_ago","td0","div0","br","span","td1","td2","div2","div1","button0","is_function","apply","this","arguments","t3","nick","user_country_code","create_if_block_12","chat_id","can_view_chat","create_if_block_11","total_visits","create_if_block_10","create_if_block_9","if_block4","operator_message","create_if_block_8","create_if_block_7","a0","a0_data_copy_value","a1","a1_id_value","online_status","toggle_class","div","i0","i1","a2","src_url_equal","img","src","img_src_value","img_alt_value","user_country_name","img_title_value","message_seen","span_title_value","operator_user_string","span_class_value","t1","t1_value","city","visitor_tz","t5_value","visitor_tz_time","span0","span1","t5","a_href_value","a_title_value","each_value_2","each_value_3","items","create_if_block_3","create_if_block_2","show_if","query","create_if_block_13","each_value_1","get_key","tbody","create_if_block_17","create_if_block_14","each_value","onlineusersGrouped","table","online_connected","thead","th0","a3","a4","th1","setInnerText","value","elm","document","getElementById","innerText","setValue","sortOn","collection","reverse","sort","b","www_dir_flags","$$props","track_is_online","soundEnabled","notificationEnabled","max_rows","timeout","country","forbiddenVisitors","updateTimeout","time_on_site","online_check","lhcLogic","timeoutVisitors","department_dpgroups","department","lhcListRequestInProgress","timeoutControl","lastSyncSkipped","attrf_key_1","attrf_val_1","attrf_key_2","attrf_val_2","attrf_key_3","attrf_val_3","attrf_key_4","attrf_val_4","attrf_key_5","attrf_val_5","onlineusersPreviousID","wasInitiated","predicate","syncOnlineVisitors","lhinst","disableSync","activeList","itemTab","classList","contains","mapItem","dashboardTab","clearTimeout","responseTrack","fetch","WWW_DIR_JAVASCRIPT","join","encodeURIComponent","method","headers","Accept","ok","Error","status","statusText","data","json","lhcOnlineVisitors","update","list","onlineusers","onlineusers_tt","tt","groupValue","friend","group","push","groupBy","forEach","item","onlineCounter","ee","emitEvent","hasNewVisitors","newVisitors","$lhcOnlineVisitors","hasValue","indexOf","Modernizr","audio","Audio","ogg","WWW_DIR_JAVASCRIPT_FILES","mp3","load","setTimeout","play","window","webkitNotifications","Notification","angular","key","checkPermission","notification","createNotification","WWW_DIR_JAVASCRIPT_FILES_NOTIFICATION","ip","onclick","cancel","show","permission","body","close","$$invalidate","error","console","setSort","addListener","settingName","changeUserSettings","changeUserSettingsIndifferent","departments","jQuery","each","lhcServices","setLocalSettings","onMount","async","MutationObserver","event","observe","attributes","attributeFilter","childList","characterData","confirm","confLH","csrf_token","toLowerCase","includes","e","lhc","revealModal","url"],"mappings":"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"}