var t={setInactive:async function(t){return(await fetch(WWW_DIR_JAVASCRIPT+"user/setinactive/"+t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":confLH.csrf_token}})).json()},setLocalSettings:async function(t,e){return(await fetch(WWW_DIR_JAVASCRIPT+"front/settings/",{method:"POST",body:JSON.stringify({attr:t,val:e}),headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":confLH.csrf_token}})).json()},searchProvider:async function(t,e){return(await fetch(WWW_DIR_JAVASCRIPT+"chat/searchprovider/"+t+"/?exclude_disabled=1&q="+e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":confLH.csrf_token}})).json()},restoreLocalSetting:function(t,e,a){try{if(localStorage){var n=localStorage.getItem(t);if(null!==n){if(1==a){var o=n.split("/"),i=new Array;return o.forEach((function(t){i.push(parseInt(t))})),i}return n}return e}}catch(t){}return e},getChatData:async function(t){return(await fetch(WWW_DIR_JAVASCRIPT+"chat/getchatdata/"+t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":confLH.csrf_token}})).json()},getToggleWidget:function(t,e,a){t.update((t=>(t.toggleWidgetData[e]="false"!=this.restoreLocalSetting(e,void 0===a?"false":a,!1),t)))},getToggleWidgetSort:function(t,e,a){t.update((t=>(t.toggleWidgetData[e]=this.restoreLocalSetting(e,void 0===a?"":a,!1),t)))},toggleWidget:function(t,e,a){t.update((t=>{if(t.toggleWidgetData[e]=void 0===t.toggleWidgetData[e]||!t.toggleWidgetData[e],localStorage)try{localStorage.setItem(e,t.toggleWidgetData[e])}catch(t){}return t})),void 0!==a&&1==a&&ee.emitEvent("angularLoadChatList")},toggleWidgetSort:function(t,e,a,n,o){t.update((t=>{if(t.toggleWidgetData[e]=void 0===t.toggleWidgetData[e]?a:t.toggleWidgetData[e]==a?n:a,localStorage)try{localStorage.setItem(e,t.toggleWidgetData[e])}catch(t){}return t})),void 0!==o&&1==o&&ee.emitEvent("angularLoadChatList")},previewChat:function(t,e){e&&e.stopPropagation(),lhc.previewChat(t)},deleteChat:function(t,e,a){return lhinst.deleteChat(t,e,a)},redirectContact:function(t,e,a){return a&&a.stopPropagation(),lhinst.redirectContact(t,e)},openModal:function(t,e){e&&e.stopPropagation(),lhc.revealModal({url:WWW_DIR_JAVASCRIPT+t,hidecallback:function(){ee.emitEvent("angularLoadChatList")}})},changeWidgetHeight:function(t,e,a){let n=document.getElementById(e+"-panel-list");n&&t.update((t=>(t[e+"_m_h"]=!0===a?parseInt(n.offsetHeight+28)+"px":parseInt(n.offsetHeight-28)+"px",localStorage.setItem(e+"_m_h",t[e+"_m_h"]),t)))},startChatTransfer:function(t,e,a){return lhinst.startChatTransfer(t,$("#tabs"),e,a)},startChatNewWindowTransfer:function(t,e,a){return lhinst.startChatNewWindowTransfer(t,e,a)},startChat:function(t,e){if($("#tabs").length>0)return lhinst.addOpenTrace("click"),lhinst.startChat(t,$("#tabs"),this.truncate(e||"Visitor",10));lhinst.startChatNewWindow(t,e)},truncate:function(t,e,a){return isNaN(e)&&(e=10),void 0===a&&(a="..."),t.length<=e||t.length-a.length<=e?t:String(t).substring(0,e-a.length)+a},storeLocalSetting:function(t,e){if(localStorage)try{e=localStorage.setItem(t,e)}catch(t){}},removeLocalSetting:function(t){if(localStorage)try{localStorage.removeItem(t)}catch(t){}},loadActiveChats:async function(){return(await fetch(WWW_DIR_JAVASCRIPT+"chat/loadactivechats",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":confLH.csrf_token}})).json()},startGroupChat:function(t,e){if(jQuery("#tabs").length>0)return lhinst.startGroupChat(t,$("#tabs"),this.truncate(e,10))},rejectGroupChat:async function(t,e){e&&e.stopPropagation();const a=await fetch(WWW_DIR_JAVASCRIPT+"groupchat/leave/"+t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":confLH.csrf_token}});await a.json(),ee.emitEvent("angularLoadChatList")},startNewGroupChat:async function(t,e,a){const n=await fetch(WWW_DIR_JAVASCRIPT+"groupchat/newgroupajax",{method:"POST",body:JSON.stringify({name:e,public:a}),headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":confLH.csrf_token}});let o=await n.json();t.update((t=>(t.new_group_name="",t.new_group_type="",t))),lhinst.startGroupChat(o.id,jQuery("#tabs"),this.truncate(o.name,10)),ee.emitEvent("angularLoadChatList")},startChatOperator:async function(t){const e=await fetch(WWW_DIR_JAVASCRIPT+"groupchat/startchatwithoperator/"+t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":confLH.csrf_token}});let a=await e.json();lhinst.startGroupChat(a.id,jQuery("#tabs"),this.truncate(a.name,10))},getNotificationsData:async function(t){return(await fetch(WWW_DIR_JAVASCRIPT+"chat/getnotificationsdata/(id)/"+t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":confLH.csrf_token}})).json()}};export{t as l};
//# sourceMappingURL=Services.ISLpxZ-Z.js.map
